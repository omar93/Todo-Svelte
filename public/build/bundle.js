var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function c(t){return null==t?"":t}function h(t,e,n=e){return t.set(n),e}const l="undefined"!=typeof window;let f=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const p=new Set;function v(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&d(v)}function m(t){let e;return 0===p.size&&d(v),{promise:new Promise((n=>{p.add(e={c:t,f:n})})),abort(){p.delete(e)}}}function g(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function T(){return I(" ")}function E(){return I("")}function _(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t){return function(e){return e.preventDefault(),t.call(this,e)}}function A(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function N(t){return function(e){e.target===this&&t.call(this,e)}}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function D(t,e){t.value=null==e?"":e}function C(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let O;function R(){if(void 0===O){O=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){O=!0}}return O}function x(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=w("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=R();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=_(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=_(n.contentWindow,"resize",e)}),g(t,n),()=>{(r||i&&n.contentWindow)&&i(),b(n)}}function P(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const L=new Set;let M,F=0;function V(t,e,n,r,i,o,a,s=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${a(r,1-r)}}\n`}const h=c+`100% {${a(n,1-n)}}\n}`,l=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${s}`,f=t.ownerDocument;L.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(w("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[l]||(p[l]=!0,d.insertRule(`@keyframes ${l} ${h}`,d.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${l} ${r}ms linear ${i}ms 1 both`,F+=1,l}function U(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),F-=i,F||d((()=>{F||(L.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),L.clear())})))}function j(t){M=t}function q(){const t=function(){if(!M)throw new Error("Function called outside component initialization");return M}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=P(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const B=[],K=[],G=[],H=[],z=Promise.resolve();let $=!1;function W(t){G.push(t)}let Q=!1;const X=new Set;function Y(){if(!Q){Q=!0;do{for(let t=0;t<B.length;t+=1){const e=B[t];j(e),J(e.$$)}for(j(null),B.length=0;K.length;)K.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];X.has(e)||(X.add(e),e())}G.length=0}while(B.length);for(;H.length;)H.pop()();$=!1,Q=!1,X.clear()}}function J(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}let Z;function tt(){return Z||(Z=Promise.resolve(),Z.then((()=>{Z=null}))),Z}function et(t,e,n){t.dispatchEvent(P(`${e?"intro":"outro"}${n}`))}const nt=new Set;let rt;function it(){rt={r:0,c:[],p:rt}}function ot(){rt.r||o(rt.c),rt=rt.p}function at(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function st(t,e,n,r){if(t&&t.o){if(nt.has(t))return;nt.add(t),rt.c.push((()=>{nt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const ut={duration:0};function ct(n,r,i){let o,s,u=r(n,i),c=!1,h=0;function l(){o&&U(n,o)}function d(){const{delay:r=0,duration:i=300,easing:a=e,tick:d=t,css:p}=u||ut;p&&(o=V(n,0,1,i,r,a,p,h++)),d(0,1);const v=f()+r,g=v+i;s&&s.abort(),c=!0,W((()=>et(n,!0,"start"))),s=m((t=>{if(c){if(t>=g)return d(1,0),et(n,!0,"end"),l(),c=!1;if(t>=v){const e=a((t-v)/i);d(e,1-e)}}return c}))}let p=!1;return{start(){p||(U(n),a(u)?(u=u(),tt().then(d)):d())},invalidate(){p=!1},end(){c&&(l(),c=!1)}}}function ht(n,r,i){let s,u=r(n,i),c=!0;const h=rt;function l(){const{delay:r=0,duration:i=300,easing:a=e,tick:l=t,css:d}=u||ut;d&&(s=V(n,1,0,i,r,a,d));const p=f()+r,v=p+i;W((()=>et(n,!1,"start"))),m((t=>{if(c){if(t>=v)return l(0,1),et(n,!1,"end"),--h.r||o(h.c),!1;if(t>=p){const e=a((t-p)/i);l(1-e,e)}}return c}))}return h.r+=1,a(u)?tt().then((()=>{u=u(),l()})):l(),{end(t){t&&u.tick&&u.tick(1,0),c&&(s&&U(n,s),c=!1)}}}function lt(t){t&&t.c()}function ft(t,e,n,i){const{fragment:s,on_mount:u,on_destroy:c,after_update:h}=t.$$;s&&s.m(e,n),i||W((()=>{const e=u.map(r).filter(a);c?c.push(...e):o(e),t.$$.on_mount=[]})),h.forEach(W)}function dt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(t,e){-1===t.$$.dirty[0]&&(B.push(t),$||($=!0,z.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(e,n,r,a,s,u,c=[-1]){const h=M;j(e);const l=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:n.context||[]),callbacks:i(),dirty:c,skip_bound:!1};let f=!1;if(l.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&s(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),f&&pt(e,t)),n})):[],l.update(),f=!0,o(l.before_update),l.fragment=!!a&&a(l.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(b)}else l.fragment&&l.fragment.c();n.intro&&at(e.$$.fragment),ft(e,n.target,n.anchor,n.customElement),Y()}j(h)}class mt{$destroy(){dt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then().catch((t=>console.log("service worker not registered",t)));const gt=[];const yt=(e,n)=>{const r=localStorage.getItem(e),i=function(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!gt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),gt.push(n,e)}if(t){for(let t=0;t<gt.length;t+=2)gt[t][0](gt[t+1]);gt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const u=[a,s];return i.push(u),1===i.length&&(r=n(o)||t),a(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}(r?JSON.parse(r):n,(()=>i.subscribe((t=>{localStorage.setItem(e,JSON.stringify(t))}))));return i},bt=yt("App-status","new");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function It(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Tt=function(){return(Tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Et(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function _t(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function St(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Nt(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var kt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[h],n[l],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Dt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Dt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ct=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ot(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Rt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Pt.prototype.create),o}return It(e,t),e}(Error),Pt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?Lt(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new xt(i,s,r);return u},t}();function Lt(t,e){return t.replace(Mt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Mt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ft(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vt(t,e){var n=new Ut(t,e);return n.subscribe.bind(n)}var Ut=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=jt),void 0===r.error&&(r.error=jt),void 0===r.complete&&(r.complete=jt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function jt(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qt(t){return t&&t._delegate?t._delegate:t}var Bt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Kt="[DEFAULT]",Gt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=Kt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ct;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Tt({identifier:Kt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:Kt})}catch(t){}try{for(var r=St(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=At(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Kt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Et(this,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Nt(Nt([],At(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),At(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=Kt),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,i=void 0===r?Kt:r,o=t.options,a=void 0===o?{}:o,s=this.normalizeInstanceIdentifier(i);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:a});try{for(var c=St(this.instancesDeferred.entries()),h=c.next();!h.done;h=c.next()){var l=At(h.value,2),f=l[0],d=l[1];s===this.normalizeInstanceIdentifier(f)&&d.resolve(u)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(u,s),u},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var i=St(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===Kt?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Kt:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ht,zt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Gt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function $t(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wt,Qt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Wt||(Wt={}));var Xt,Yt={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},Jt=Wt.INFO,Zt=((Ht={})[Wt.DEBUG]="log",Ht[Wt.VERBOSE]="log",Ht[Wt.INFO]="info",Ht[Wt.WARN]="warn",Ht[Wt.ERROR]="error",Ht),te=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Zt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,$t(["["+i+"]  "+t.name+":"],n))}},ee=function(){function t(t){this.name=t,this._logLevel=Jt,this._logHandler=te,this._userLogHandler=null,Qt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Wt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Yt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Wt.DEBUG],t)),this._logHandler.apply(this,$t([this,Wt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Wt.VERBOSE],t)),this._logHandler.apply(this,$t([this,Wt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Wt.INFO],t)),this._logHandler.apply(this,$t([this,Wt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Wt.WARN],t)),this._logHandler.apply(this,$t([this,Wt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Wt.ERROR],t)),this._logHandler.apply(this,$t([this,Wt.ERROR],t))},t}();function ne(t){Qt.forEach((function(e){e.setLogLevel(t)}))}var re,ie=((Xt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Xt["bad-app-name"]="Illegal App name: '{$appName}",Xt["duplicate-app"]="Firebase App named '{$appName}' already exists",Xt["app-deleted"]="Firebase App named '{$appName}' already deleted",Xt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Xt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Xt),oe=new Pt("app","Firebase",ie),ae="@firebase/app",se="[DEFAULT]",ue=((re={})[ae]="fire-core",re["@firebase/analytics"]="fire-analytics",re["@firebase/app-check"]="fire-app-check",re["@firebase/auth"]="fire-auth",re["@firebase/database"]="fire-rtdb",re["@firebase/functions"]="fire-fn",re["@firebase/installations"]="fire-iid",re["@firebase/messaging"]="fire-fcm",re["@firebase/performance"]="fire-perf",re["@firebase/remote-config"]="fire-rc",re["@firebase/storage"]="fire-gcs",re["@firebase/firestore"]="fire-fst",re["fire-js"]="fire-js",re["firebase-wrapper"]="fire-js-all",re),ce=new ee("@firebase/app"),he=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Dt(void 0,t),this.container=new zt(e.name),this._addComponent(new Bt("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=se),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=se),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ce.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw oe.create("app-deleted",{appName:this.name_})},t}();he.prototype.name&&he.prototype.options||he.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function le(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=se);var a=o.name;if("string"!=typeof a||!a)throw oe.create("bad-app-name",{appName:String(a)});if(Ft(e,a))throw oe.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ue[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ce.warn(u.join(" "))}o(new Bt(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:ne,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw oe.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Yt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Wt[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=Qt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Ft(e,t=t||se))throw oe.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return ce.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw oe.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Dt(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fe=function t(){var e=le(he);return e.INTERNAL=Tt(Tt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Dt(e,t)},createSubscribe:Vt,ErrorFactory:Pt,deepExtend:Dt}),e}(),de=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var pe=self.firebase.SDK_VERSION;pe&&pe.indexOf("LITE")>=0&&ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ve=fe.initializeApp;fe.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Rt()&&ce.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ve.apply(void 0,t)};var me=fe;!function(t,e){t.INTERNAL.registerComponent(new Bt("platform-logger",(function(t){return new de(t)}),"PRIVATE")),t.registerVersion(ae,"0.6.22",e),t.registerVersion("fire-js","")}(me);function ge(e){let n,r,i,o;return{c(){n=w("button"),k(n,"class",r=c(e[0]?"large":"small")+" svelte-1yn73mn")},m(t,r){y(t,n,r),i||(o=_(n,"click",e[1]),i=!0)},p(t,[e]){1&e&&r!==(r=c(t[0]?"large":"small")+" svelte-1yn73mn")&&k(n,"class",r)},i:t,o:t,d(t){t&&b(n),i=!1,o()}}}function ye(t,e,n){let{large:r=!0}=e;return t.$$set=t=>{"large"in t&&n(0,r=t.large)},[r,()=>{me.auth().signInWithPopup(new me.auth.GoogleAuthProvider).then((()=>bt.set("online"))).catch((t=>console.error(t)))}]}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
me.registerVersion("firebase","8.6.3","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Qa(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==l(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function E(t,e,n){this.code=A+t,this.message=e||N[t]||"",this.a=n||null}function _(t){var e=t&&t.code;return e?new E(e.substring(A.length),t.message,t.serverResponse):null}I(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var S,A="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function x(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=D("__EID__")?"__EID__":void 0,I(O,Error),O.prototype.name="CustomError",I(R,O),R.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new P((function(){return new U}),(function(t){t.reset()}));function V(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=j(t,e)}function z(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function W(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var st=a.navigator;if(st){var ut=st.userAgent;if(ut){X=ut;break t}}X=""}function ct(t){return ot(X,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===wt&&e||"",this.b=bt}function gt(t){return t instanceof mt&&t.constructor===mt&&t.b===bt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,bt={},wt={};function It(){if(void 0===yt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(t){a.console&&a.console.error(t.message)}yt=t}else yt=t}return yt}function Tt(t,e){this.a=e===Nt?t:""}function Et(t){return t instanceof Tt&&t.constructor===Tt?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function _t(t,e){var n=gt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Tt(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?gt(t):encodeURIComponent(String(t))})))}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function kt(t,e){this.a=e===Lt?t:""}function Dt(t){return t instanceof kt&&t.constructor===kt?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ot=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof kt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t))t=new kt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ot);t=e&&Ct.test(e[1])?new kt(t,Lt):null}return t}function Pt(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new kt(t,Lt))}var Lt={},Mt=new kt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Vt?t:""}Ft.prototype.sa=!0,Ft.prototype.ra=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Ut(t,e,n,r){return t=t instanceof kt?t:Pt(t),e=e||a,n=n instanceof mt?gt(n):n||"",e.open(Dt(t),n,r,void 0)}function jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=h;var Kt,Gt,Ht=ct("Opera"),zt=ct("Trident")||ct("MSIE"),$t=ct("Edge"),Wt=$t||zt,Qt=ct("Gecko")&&!(ot(X.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Xt=ot(X.toLowerCase(),"webkit")&&!ct("Edge");function Yt(){var t=a.document;return t?t.documentMode:void 0}t:{var Jt="",Zt=(Gt=X,Qt?/rv:([^\);]+)(\)|;)/.exec(Gt):$t?/Edge\/([\d\.]+)/.exec(Gt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Xt?/WebKit\/(\S+)/.exec(Gt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(Zt&&(Jt=Zt?Zt[1]:""),zt){var te=Yt();if(null!=te&&te>parseFloat(Jt)){Kt=String(te);break t}}Kt=Jt}var ee,ne={};function re(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Y(String(Kt)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=at(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||at(0==a[2].length,0==s[2].length)||at(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&zt){var ie=Yt();ee=ie||(parseInt(Kt,10)||void 0)}else ee=void 0;var oe=ee;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!zt||9<=Number(oe);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ht(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ce,he,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}q(a?Q(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){a.setTimeout((function(){throw t}),0)}function ve(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(be)}}else he=function(){var t=be;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ct("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(ce||(ce=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),ce(t)):a.setImmediate(t)}}(),ge||(he(),ge=!0),ye.add(t,e)}var ge=!1,ye=new M;function be(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){pe(t)}L(F,t)}ge=!1}function we(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Pe(n,Te,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Pe(n,Ee,t)}))}catch(t){Pe(this,Ee,t)}}var Ie=0,Te=2,Ee=3;function _e(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_e.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new P((function(){return new _e}),(function(t){t.reset()}));function Ae(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof we)return t;var e=new we(h);return Pe(e,Te,t),e}function ke(t){return new we((function(e,n){n(t)}))}function De(t,e,n){Le(t,e,n,null)||ve(w(e,t))}function Ce(t){return new we((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)De(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ie&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),Ve(n,i,Ee,e)))}t.c=null}else Pe(t,Ee,e)}function Re(t,e){t.b||t.a!=Te&&t.a!=Ee||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Ae(null,null,null);return i.a=new we((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Re(t,i),i.a}function Pe(t,e,n){t.a==Ie&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Le(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ee||n instanceof qe||function(t,e){t.g=!0,ve((function(){t.g&&je.call(null,e)}))}(t,n)))}function Le(t,e,n,r){if(t instanceof we)return Re(t,Ae(e||h,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Me(t){t.h||(t.h=!0,ve(t.gc,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ve(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(t){je.call(null,t)}L(Se,e)}function Ue(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return xe(this,d(t)?t:null,d(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(t=we.prototype).oa=function(t,e){return(t=Ae(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==Ie){var e=new qe(t);ve((function(){Oe(this,e)}),this)}},t.$c=function(t){this.a=Ie,Pe(this,Te,t)},t.ad=function(t){this.a=Ie,Pe(this,Ee,t)},t.gc=function(){for(var t;t=Fe(this);)Ve(this,t,this.a,this.i);this.h=!1};var je=pe;function qe(t){O.call(this,t)}function Be(){this.xa=this.xa,this.pa=this.pa}I(qe,O),qe.prototype.name="cancel";var Ke={};function Ge(t){if(!t.xa&&(t.xa=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)}(t);delete Ke[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},ze=!zt||9<=Number(oe),$e=zt&&!re("9"),We=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Xe,Qe);var Ye=He({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ze,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?In(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=gn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=mn,e=ze?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)We||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?Tn(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function dn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function mn(t,e){if(t.va)return!0;if(!ze){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function gn(t){return(t=t[an])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function wn(){Be.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Tn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function _n(t,e,n){if(d(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Sn(t){var e=null;return new we((function(n,r){-1==(e=_n((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function An(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Cn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Cn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(wn,Be),wn.prototype[Je]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;pt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=En(a,r,!0,t)&&i}if(i=En(a=t.b=n,r,!0,t)&&i,i=En(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(a=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=kn.prototype).W=function(){Dn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Dn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Cn(this.b,t)?this.b[t]:e},t.set=function(t,e){Cn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,xn(this,t.c),this.l=t.l,this.a=t.a,Pn(this,t.g),this.f=t.f,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,xn(this,n[1]||"",!0),this.l=jn(n[2]||""),this.a=jn(n[3]||"",!0),Pn(this,n[4]),this.f=jn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=jn(n[7]||"")):(this.i=!!e,this.b=new Wn(null,this.i))}function xn(t,e,n){t.c=n?jn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,zn)),t.b=new Wn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Vn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Un(t,e,n,r){var i=new Rn(null,void 0);return t&&xn(i,t),e&&(i.a=e),n&&Pn(i,n),r&&(i.f=r),i}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Hn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,$n)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?xn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Pn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,Gn=/[#\?:]/g,Hn=/[#\?]/g,zn=/[#\?@]/g,$n=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=An(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Yn(t,e){Qn(t),e=er(t,e),Cn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dn(t)))}function Jn(t,e){return Qn(t),e=er(t,e),Cn(t.a.b,e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Q(n)),t.b+=n.length)}function tr(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Wn.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=W(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=kr();return zt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=Dt(xt(t)||Mt)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||a.window;try{t.close()}catch(t){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Sr(kr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:xt(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(a=de(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:Pt(e),a.href=Dt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Ut("",r,n,a),t=Dt(e),a&&(Wt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qt(t)+'">',t=new Ft(t=(r=It())?r.createHTML(t):t,null,Vt),r=a.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Ut(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new we((function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function yr(t){return t=t||kr(),!("file:"!==xr()&&"ionic:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Ir(){return me.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":me.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Tr(){var t=Ir();return"ReactNative"===t||"Node"===t}var Er="Firefox",_r="Chrome";function Sr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Er:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":_r:"Safari"}var Ar={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=Sr(i=kr()):"Worker"===r&&(r=Sr(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return a.navigator&&a.navigator.userAgent||""}function Dr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Cr(){try{var t=a.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(t){return wr()&&!!a.indexedDB}return!1}function Or(){return(Rr()||"chrome-extension:"===xr()||yr())&&!Tr()&&Cr()&&!wr()}function Rr(){return"http:"===xr()||"https:"===xr()}function xr(){return a.location&&a.location.protocol||null}function Pr(t){return!fr(t=t||kr())&&Sr(t)!=Er}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Sr(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function jr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=Ir(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Gr(){return!(!Dr("fireauth.oauthhelper",a)&&!Dr("fireauth.iframe",a))}qr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==xr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,zr={};function $r(t){zr[t]||(zr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wr={};Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Wr.abcd}catch(Gt){Hr=!1}function Qr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Yr(t){var e={};return Xr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[hi],r=t[fi],i=t[di];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[gi]=n||null,e[pi]=r):(e[vi]=r||null,e[gi]=r||null,e[pi]=n||null),e[mi]=t||null,Qr(this,bi,i),Qr(this,yi,Jr(e))}I(oi,Zr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",di="requestType",pi="email",vi="fromEmail",mi="multiFactorInfo",gi="previousEmail",yi="data",bi="operation";function wi(t){var e=Fn(t=Vn(t),Ii)||null,n=Fn(t,Ti)||null,r=Fn(t,Si)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new E("argument-error",Ii+", "+Ti+"and "+Si+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ei)||null,languageCode:Fn(t,_i)||null,tenantId:Fn(t,Ai)||null})}var Ii="apiKey",Ti="oobCode",Ei="continueUrl",_i="languageCode",Si="mode",Ai="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new wi(t)}catch(t){return null}}function Di(t){var e=t[Pi];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ci];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new E("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Ci+" property must be a non null object when specified.");if(this.f=null,(e=t[xi])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",xi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new E("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Ci="android",Oi="dynamicLinkDomain",Ri="handleCodeInApp",xi="iOS",Pi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Vi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ji=null;function qi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ji[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ji){ji={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ji[o]&&(ji[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ki(t){try{return new Bi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=qi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),zi=["client_id","response_type","scope","redirect_uri","state"],$i={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:zi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:zi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:zi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Wi(t){for(var e in $i)if($i[e].fa==t)return $i[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Xi])return new Ji(t)}catch(t){}return null}var Xi="idToken",Yi="providerId";function Ji(t){var e=t[Yi];if(!e&&t[Xi]){var n=Ki(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Qr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=Vn(t),n=Fn(e,"link"),r=Fn(Vn(n),"link");return e=Fn(e,"deep_link_id"),Fn(Vn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}I(Zi,Ji),I(to,Zi),I(eo,Zi),I(no,Zi),I(ro,Zi);var ao="enroll",so="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Ja]){var n=Ki(t[Ja]);if(!n||e!=n.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new E("user-mismatch"):t}))}function ho(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function go(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Wi(t)||{}).Ja||null,this.ob=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function bo(t){go.call(this,t,zi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function Io(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function To(){bo.call(this,"github.com")}function Eo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function _o(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new _o).credential({idToken:n,accessToken:e})}function Ao(){go.call(this,"twitter.com",Hi)}function No(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Co.EMAIL_LINK_SIGN_IN_METHOD?Co.EMAIL_LINK_SIGN_IN_METHOD:Co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Do(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function Co(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Ro(e)))throw new E("argument-error","Invalid email link!");return new ko(t,e.code,Co.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=ki(t=io(t)))&&t.operation===ui?t:null}function xo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new E("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new xo(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||me.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new xo({eb:t,cb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new xo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return Io(n);case"github.com":return Eo(n);case"twitter.com":return No(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new ho(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Uo(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function jo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function qo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&_(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ka=function(t){return ws(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,Is(t,n)},ho.prototype.c=function(t,e){return co(Ts(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ws(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Is(t,n)},po.prototype.c=function(t,e){return co(Ts(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Ib=ft(t),this},I(yo,go),I(bo,go),bo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},bo.prototype.Qb=function(){return Q(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},I(wo,bo),Qr(wo,"PROVIDER_ID","facebook.com"),Qr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(To,bo),Qr(To,"PROVIDER_ID","github.com"),Qr(To,"GITHUB_SIGN_IN_METHOD","github.com"),I(_o,bo),Qr(_o,"PROVIDER_ID","google.com"),Qr(_o,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Ao,go),Qr(Ao,"PROVIDER_ID","twitter.com"),Qr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Cs,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Os,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Gs,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Co,{PROVIDER_ID:"password"}),Xr(Co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),xo.prototype.ka=function(t){return t.fb(Lo(this))},xo.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},xo.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},xo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,$s,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.T=function(){return this.h},jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Go=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function zo(t,e,n){E.call(this,t,n),(t=e||{}).Jb&&Qr(this,"email",t.Jb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Zb&&Qr(this,"tenantId",t.Zb)}function $o(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Vo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new zo(e,n,t.message)}return null}function Wo(){}function Qo(t){return t.c||(t.c=t.b())}function Xo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Sb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}I(Ho,E),I(zo,E),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&pt(t,e),t},zo.prototype.toJSON=function(){return this.w()},Wo.prototype.c=null,I(Xo,Wo),Xo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Xo,I(Jo,Wo),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(x("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(d(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ca={},ha=null;function la(t){var e;if(ha||(ha=new na(""),ca[""]=ha,ha.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=la(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function da(t){this.f=t}function pa(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=la("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(da,Wo),da.prototype.a=function(){return new pa(this.f)},da.prototype.b=function(t){return function(){return t}}({}),I(pa,wn);var va=0;function ma(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ga(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ya(t)}function ya(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){wn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=wa,this.u=this.S=!1}(t=pa.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ya(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ga(this)),this.readyState=va},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ya(this)),this.a&&(this.readyState=3,ya(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ma(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ga(this):ya(this),3==this.readyState&&ma(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ga(this))},t.sc=function(t){this.a&&(this.response=t,ga(this))},t.Ua=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ga(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(ba,wn);var wa="";ba.prototype.b=la("goog.net.XhrIo");var Ia=/^https?$/i,Ta=["POST","PUT"];function Ea(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?Qo(t.D):Qo(Ko),t.a.onreadystatechange=b(t.Vb,t);try{fa(t.b,Ra(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return fa(t.b,Ra(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)q(t,e,void 0);else for(var n=Nn(t),r=An(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=_a,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!H(Ta,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Da(t),0<t.g&&(t.u=function(t){return zt&&re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Ra(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=_n(t.Ma,t.g,t)),fa(t.b,Ra(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fa(t.b,Ra(t,"Send error: "+e.message)),Sa(t,e)}}function _a(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Aa(t),ka(t)}function Aa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Na(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ca(t)&&2==Oa(t))fa(t.b,Ra(t,"Local request error detected and ignored"));else if(t.i&&4==Ca(t))_n(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ca(t)){fa(t.b,Ra(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(On)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Ia.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ca(t)?t.a.statusText:""}catch(e){fa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Oa(t)+"]",Aa(t)}}finally{ka(t)}}}function ka(t,e){if(t.a){Da(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Da(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Ca(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<Ca(t)?t.a.status:-1}catch(t){return-1}}function Ra(t,e){return e+" ["+t.R+" "+t.l+" "+Oa(t)+"]"}function xa(t){var e=Ga;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Pa(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function La(t){if(t.a){if(!t.v)throw new Ua(t);t.v=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Fa(t){return G(t.g,(function(t){return d(t[1])}))}function Va(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ba[e];n&&(a.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(C(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof xa?(Ma(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qa(e),Ba[e.a]=e,t.h=e.a)}function Ua(){O.call(this)}function ja(){O.call(this)}function qa(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=ba.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Ra(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,Ra(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ka(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ka(this,!0)),ba.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Na(this):this.Jc())},t.Jc=function(){Na(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case wa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fa(this.b,"Can not get response: "+t.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new ja(this),La(this),Pa(this,!1,t))}},xa.prototype.m=function(t,e){this.i=!1,Pa(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new we((function(t,e){r=t,i=e}));return Ma(this,r,(function(t){t instanceof ja?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,I(Ua,O),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",I(ja,O),ja.prototype.message="Deferred was canceled",ja.prototype.name="CanceledError",qa.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Ka(t){var e,n=document,r=Et(t).toString(),i=de(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new xa(o);return e=window.setTimeout((function(){Ha(i,!0);var t=new Wa($a,"Timeout reached for loading script "+r);La(s),Pa(s,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ha(i,!1,e),La(s),Pa(s,!0,null))},i.onerror=function(){Ha(i,!0,e);var t=new Wa(za,"Error while loading script "+r);La(s),Pa(s,!1,t)},pt(o={},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Et(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ga(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ha(t,!0,this.Ma)}}function Ha(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var za=0,$a=1;function Wa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Qa(t){this.f=t}function Xa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Za,this.g=ft(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||es,this.a=ft(t.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=a.XMLHttpRequest||n&&me.INTERNAL.node&&me.INTERNAL.node.XMLHttpRequest)&&!wr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wr()?this.f=new da(self):Tr()?this.f=new Qa(n):this.f=new Jo,this.b=null}I(Wa,O),I(Qa,Wo),Qa.prototype.a=function(){return new this.f},Qa.prototype.b=function(){return{}};var Ya,Ja="idToken",Za=new qr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new qr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,xn(t,e.c),t.a=e.a,Pn(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,s){(function(){var t=kr();return!((t=Sr(t)!=_r?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&oe&&!(9<oe))})()||wr()?t=b(t.u,t):(Ya||(Ya=new we((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[cs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Ka(_t(us,{onload:cs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,s)}Xa.prototype.T=function(){return this.b},Xa.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ba(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}In(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Tn(s,"ready",(function(){u&&clearTimeout(u),Ge(this)})),Tn(s,"timeout",(function(){u&&clearTimeout(u),Ge(this),e&&e(null)})),Ea(s,t,n,r,i)};var us=new mt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t,e,n,r,i,o,a){var s=Vn(e+n);Mn(s,"key",t.c),a&&Mn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(s,c,i[c]);return new we((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new E("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function ls(t){if("string"!=typeof(t=t.email)||!mr.test(t))throw new E("invalid-email")}function fs(t){"email"in t&&ls(t)}function ds(t){if(!t[Ja]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ft(t));throw new E("internal-error")}}function ps(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Xa.prototype.s=function(t,e,n,r,i){var o=this;Ya.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xa.prototype.zb=function(){return ru(this,Hs,{})},Xa.prototype.Bb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Xa.prototype.Cb=function(t,e){return ru(this,Gs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ms(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function gs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=$o(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=$o(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=$o(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ds(t)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Ws,e)}function Is(t,e){return e.returnIdpCredential=!0,ru(t,Xs,e)}function Ts(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qs,e)}function Es(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Xa.prototype).Db=function(t,e){var n={idToken:t},r=[];return ht(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.vb=function(t,e){return pt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Vs,t)},t.wb=function(t,e){return pt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.ub=function(t,e){return pt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Eb=function(t,e,n){return pt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.fb=function(t){return ru(this,Zs,t)},t.nb=function(t,e){return ru(this,qs,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Ss,{oobCode:t})},t.jb=function(t){return ru(this,_s,{oobCode:t})};var _s={endpoint:"setAccountInfo",A:Es,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Es,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},As={endpoint:"signupNewUser",A:function(t){if(ls(t),!t.password)throw new E("weak-password")},G:ds,V:!0,B:!0},Ns={endpoint:"createAuthUri",B:!0},ks={endpoint:"deleteAccount",N:["idToken"]},Ds={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},Cs={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ls,G:ds,V:!0,B:!0},Os={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ls,G:ds,V:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ms,G:ds,B:!0,Na:!0},xs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ms,G:ds,B:!0,Na:!0},Ps={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");ls(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");ls(t)},Z:"email",B:!0},Us={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},js={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},qs={endpoint:"resetPassword",A:Es,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},Gs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new E("weak-password")},G:ds,V:!0},Hs={endpoint:"signupNewUser",G:ds,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},$s={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ws={endpoint:"verifyAssertion",A:gs,Ya:ys,G:bs,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:gs,Ya:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ds(t)},V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:function(t){if(gs(t),!t.idToken)throw new E("internal-error")},Ya:ys,G:bs,V:!0},Ys={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:ds,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(ls(t),!t.password)throw new E("wrong-password")},G:ds,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");ps(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",$o(t);ds(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ja]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return ke(new E("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ne(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),hs(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",pt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Lr(t)),new E("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new we((function(t,e){function n(){jr(),Dr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){jr(),e(Error("Network Error"))},timeout:uu.get()})}if(Dr("gapi.iframes.Iframe"))t();else if(Dr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Dr("gapi.load")?n():e(Error("Network Error"))},Ne(Ka(r=_t(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new we((function(e,n){Dr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new mt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Un((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(t){try{return me.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,Us,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(cr())}))}function mu(t){return t.m||(t.m=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=du(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.m}function gu(t){return t.l||(t.C=t.c?Nr(t.c,du(t.b)):null,t.l=new Xa(t.g,D(t.i),t.C),t.f&&is(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=ft(u||null),t.f=c,t.yb(h).toString()}function bu(t){if(this.a=t||me.INTERNAL.reactNative&&me.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=me.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),lt(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Yn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Yn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Yn(t.b,"eid"),(a=du(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=pu.prototype).Ob=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return mu(t).then((function(){return function(t,e){return t.rb.then((function(){return new we((function(n){t.a.send(e.type,e,n,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&dr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new we((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Sn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=kr();return!Pr(t)&&!Ur(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return ke(new E("popup-blocked"));if(a&&!Pr())return this.ma().o((function(e){dr(t),i(e)})),r(),Ne();this.a||(this.a=vu(gu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw dr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),a)||hr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(gu(this)));var i=this;return this.a.then((function(){Uo(e),hr(yu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return mu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new E("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){$(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,Lr(e)))},t.U=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,Tu=[];function Eu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function ku(){if(!Ru())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(q(Tu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Tu.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Eu(this.v,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new _u(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new we((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Cu(t){return t.i||(t.i=Du(t)),t.i}function Ou(t,e){var n=0;return new we((function r(i,o){Cu(t).then(e).then(i).o((function(e){if(!(3<++n))return Cu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!a.indexedDB}catch(t){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new we((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Fu(t){return Cu(t).then((function(t){var e=xu(Pu(t,!1));return e.getAll?Lu(e.getAll()):new we((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Ru()){var t=Vr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){q(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==Ir();if(!(t=Bu()||t&&me.INTERNAL.node&&me.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Bu()||me.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=a.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Ir();if(!(t=Hu()||t&&me.INTERNAL.node&&me.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Hu()||me.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=a.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Qu,t.Node=Xu,t.ReactNative=Yu,t.Worker=Ju,this.a=t[Ir()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Ce(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=xu(Pu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=xu(Pu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(xu(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(xu(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vu(t),e()}(this),this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.U=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&ln(a.window,"storage",t)},(t=Ku.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.U=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var $u,Wu,Qu={F:qu,bb:Gu},Xu={F:qu,bb:Gu},Yu={F:bu,bb:Ku},Ju={F:qu,bb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Ur(kr())||!br()),e=Pr(),n=Cr();this.m=t,this.h=e,this.l=n,this.a={},$u||($u=new zu),t=$u;try{this.g=!ur()&&Gr()||!a.indexedDB?new t.a.F:new Uu(wr()?new ju:new t.a.F)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new ju}this.v=new ju,this.f=b(this.Yb,this),this.b={}}function ec(){return Wu||(Wu=new tc),Wu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),lt(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Gr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},zt&&oe&&10==oe&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.mb,this))},t.mb=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=a.Int32Array?new Int32Array(yc):yc),this.reset()}I(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,dc=[],pc=0;pc<fc;pc++)dc[pc]=0;var vc=W(128,dc);function mc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(mc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(mc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Q(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}I(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Tc(t){return new E("invalid-cordova-configuration",t)}function Ec(t){var e=new bc;gc(e,t),t=[];var n=8*e.g;56>e.c?gc(e,vc,56-e.c):gc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(mc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function _c(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new we((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ac(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Vn(i),"firebaseError")||null))?_(o):null)?new jo(r.c,r.b,null,null,o,null,r.T()):new jo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(t,i)}))}var n=new jo("unknown",null,null,null,new E("no-auth-event")),r=!1,i=Sn(500).then((function(){return Ac(t).then((function(){r||_c(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Dr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Bo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Dr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ac(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=ec()}(t=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?gr().then((function(){return new we((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Dr("universalLinks.subscribe",a))throw Tc("cordova-universal-links-plugin-fix is not installed");if(void 0===Dr("BuildInfo.packageName",a))throw Tc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Dr("cordova.plugins.browsertab.openUrl",a))throw Tc("cordova-plugin-browsertab is not installed");if("function"!=typeof Dr("cordova.InAppBrowser.open",a))throw Tc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")}))},t.Ob=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Ne()},t.Mb=function(){return ke(new E("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return ke(new E("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=Ne().then((function(){return Uo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new jo(e,r,null,o,new E("no-auth-event"),null,i),u=Dr("BuildInfo.packageName",a);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var c=Dr("BuildInfo.displayName",a),h={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!kr().toLowerCase().match(/android/))return ke(new E("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ec(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,s.w(),e)})).then((function(){var e=Dr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Dr("cordova.plugins.browsertab.openUrl",a)))throw new E("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Dr("cordova.InAppBrowser.open",a)))throw new E("invalid-cordova-configuration");e=kr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new we((function(t,e){u=function(){var e=Dr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=Sn(2e3).then((function(){e(new E("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Ac(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new E("no-auth-event")),t(e))}))},t.Sa=function(t){$(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Dc(t){return ic(t.b,kc,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Xc,this.g=new Nc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,S,this.J)}function Oc(t,e,n,r,i){var o=me.SDK_VERSION||null;return yr()?new Ic(t,e,n,o,r,i):new pu(t,e,n,o,r,i)}function Rc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function xc(t){t.a.Xb()&&Rc(t).o((function(e){var n=new jo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||zc(t.b)}function Pc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Dc(t.g).then((function(){Rc(t).o((function(e){var n=new jo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):xc(t)})).o((function(){xc(t)}))}function Lc(t,e){$(t.h,(function(t){return t==e}))}Cc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return zc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Vc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new E("operation-not-supported-in-this-environment");return o=e,Dc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new we((function(){})):Dc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Cc.prototype.qa=function(){return this.b.qa()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Gc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Cc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function $c(t){t.g&&!t.i&&Qc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;q(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Qc(t,s,e,null)})).o((function(e){Qc(t,s,null,e)}))}(this,t,e):ke(new E("invalid-auth-event")):(Qc(this,!1,null,null),Ne())}else ke(new E("invalid-auth-event"))},Hc.prototype.qa=function(){var t=this;return new we((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new E("timeout");t.a&&t.a.cancel(),t.a=Sn(Fc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):ke(new E("invalid-auth-event"))}else ke(new E("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Qr(this,"resolver",this.b)}function oh(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function ah(){}function sh(t){Qr(this,"factorId",t.fa),this.a=t}function uh(t){if(sh.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function dh(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Br()||!t?Ne():new we((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){dh(t,!0)})).o((function(e){t.i(e)&&dh(t,!1)}))}function ph(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function mh(t,e){t.b=Ki(e[Ja]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gh(t,e){return function(t,e){return new we((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new E("internal-error")):r(new E("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new E("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yh(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function bh(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function wh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=me.SDK_VERSION?Nr(me.SDK_VERSION):null;this.a=new Xa(this.l,D(S),r),t.emulatorConfig&&is(this.a,t.emulatorConfig),this.b=new ph(this.a),kh(this,e[Ja]),mh(this.b,e),Qr(this,"refreshToken",this.b.a),Oh(this,n||{}),wn.call(this),this.R=!1,this.s&&Or()&&(this.i=Gc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=b(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){is(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Eh(i,t.f)},this.ba=null,this.O=new hh(this,n),Qr(this,"multiFactor",this.O)}function Ih(t,e){t.ja&&ln(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function Th(t,e){t.X&&ln(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function Eh(t,e){t.$=e,as(t.a,me.SDK_VERSION?Nr(me.SDK_VERSION,t.$):null)}function _h(t,e){t.ba&&ln(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function Sh(t){try{return me.app(t.m).auth()}catch(e){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ah(t){t.D||t.u.b||(t.u.start(),ln(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function Nh(t){ln(t,"tokenChanged",t.aa),t.u.stop()}function kh(t,e){t.za=e,Qr(t,"_lat",e)}function Dh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ce(e).then((function(){return t}))}function Ch(t){t.i&&!t.R&&(t.R=!0,Pc(t.i,t))}function Oh(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Rh(){}function xh(t){return Ne().then((function(){if(t.D)throw new E("app-deleted")}))}function Ph(t){return K(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Fh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Vh(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new yh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new yh),q(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Qr(t,"refreshToken",t.b.a),lh(t.O,e.O.b))}function Uh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ps,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Fh(t,"isAnonymous",!1),e}))}))}function jh(t,e){e[Ja]&&t.za!=e[Ja]&&(mh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),kh(t,e[Ja]),Fh(t,"refreshToken",t.b.a))}function qh(t,e){return Uh(t).then((function(){if(H(Ph(t),e))return Dh(t).then((function(){throw new E("provider-already-linked")}))}))}function Bh(t,e,n){return Yr({user:t,credential:Vo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Kh(t,e){return jh(t,e),t.reload().then((function(){return t}))}function Gh(t,e,n,r,i){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=Wi(n.providerId),a=Vr(t.uid+":::"),s=null;(!Pr()||br())&&t.s&&n.isOAuthProvider&&(s=yu(t.s,t.l,t.m,e,n,null,a,me.SDK_VERSION||null,null,null,t.tenantId));var u=pr(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return Vc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new we((function(n,r){t.na(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=qc(t.i,t,e,u,a)}))})).then((function(t){return u&&dr(u),t?Yr(t):null})).o((function(t){throw u&&dr(u),t})),$h(t,r,i)}function Hh(t,e,n,r,i){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=null,a=Vr(t.uid+":::");return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Dh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return jc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yh(t.ha);throw o})).then((function(){if(o)throw o})),$h(t,r,i)}function zh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new E("internal-error");throw new E("auth-domain-config-required")}}function $h(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),ke(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ch("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){z(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Sh(t),b(t.jc,t))),n||e}))}function Wh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ja]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new wh(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&Lh(i,Yr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Qh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nh],delete n[rh],pt(n,t),e.g(n)}))},I(ih,E),ah.prototype.sb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),pt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return pt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,xs,n)}))}(this,t,e)},I(sh,ah),I(uh,sh),I(ch,Qe),(t=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return jh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return lh(e,r),jh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,dh(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ph.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ph.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?gh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},yh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(wh,wn),wh.prototype.wa=function(t){this.ya=t,rs(this.a,t)},wh.prototype.la=function(){return this.ya},wh.prototype.Ga=function(){return Q(this.$)},wh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(wh.prototype,"providerId","firebase"),(t=wh.prototype).reload=function(){var t=this;return $h(this,xh(this).then((function(){return Uh(t).then((function(){return Dh(t)})).then(Rh)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return $h(this,xh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.za&&(kh(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Fh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Fh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return $h(this,t.c(this.a,this.uid).then((function(t){return jh(e,t),n=Bh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return $h(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),Kh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return $h(this,qh(this,"phone").then((function(){return Zc(Sh(n),t,e,b(n.qb,n))})))},t.Mc=function(t,e){var n=this;return $h(this,Ne().then((function(){return Zc(Sh(n),t,e,b(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return $h(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.ed=function(t){var e=this;return $h(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return $h(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return xh(this);var e=this;return $h(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jh(e,t),Fh(e,"displayName",t.displayName||null),Fh(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Dh(e)})).then(Rh))},t.cd=function(t){var e=this;return $h(this,Uh(this).then((function(n){return H(Ph(e),t)?function(t,e,n){return ru(t,Ds,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(Ph(e),(function(t){n[t]||Mh(e,t)})),n[Mo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Dh(e)})):Dh(e).then((function(){throw new E("no-such-provider")}))})))},t.delete=function(){var t=this;return $h(this,this.I().then((function(e){return ru(t.a,ks,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Ih(t,null),Th(t,null),_h(t,null),t.J=[],t.D=!0,Nh(t),Qr(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):null},t.Ec=function(t){var e=this;return Gh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return Dh(e)}))}),!1)},t.Nc=function(t){return Gh(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Fc=function(t){var e=this;return Hh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},t.Oc=function(t){return Hh(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $h(this,this.I().then((function(n){return Is(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),Kh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $h(this,Ne().then((function(){return co(Ts(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),jh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return $h(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:Ui(new Di(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return $h(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:Ui(new Di(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return $h(this,t=co(Ne(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),jh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&pt(t,this.metadata.w()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),pt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Yh(t){return ic(t.b,Xh,t.a)}function Jh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=el("local"),n=el("session"),r=el("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tl,t.a).then((function(t){return t?el(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(el("local"),this.a,b(this.g,this))}function Zh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,el(Zu[n]),t.a));return r.push(ic(t.b,tl,t.a)),function(t){return new we((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)De(t[s],w(o,s),a);else e(i)}))}(r)}Jh.prototype.g=function(){var t=this,e=el("local");ol(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tl={name:"persistence",F:"session"};function el(t){return{name:"authUser",F:t}}function nl(t,e){return ol(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rl(t){return ol(t,(function(){return ic(t.b,t.c,t.a)}))}function il(t,e,n){return ol(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Wh(t||{})}))}))}function ol(t,e){return t.f=t.f.then(e,e),t.f}function al(t){if(this.l=!1,Qr(this,"settings",new Yc),Qr(this,"app",t),!vl(this).options||!vl(this).options.apiKey)throw new E("invalid-api-key");t=me.SDK_VERSION?Nr(me.SDK_VERSION):null,this.a=new Xa(vl(this).options&&vl(this).options.apiKey,D(S),t),this.R=[],this.s=[],this.O=[],this.hb=me.INTERNAL.createSubscribe(b(this.zc,this)),this.X=void 0,this.bc=me.INTERNAL.createSubscribe(b(this.Ac,this)),dl(this,null),this.i=new Jh(vl(this).options.apiKey+":"+vl(this).name),this.D=new Qh(vl(this).options.apiKey+":"+vl(this).name),this.$=bl(this,function(t){var e=vl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Wh(t||{})}))}(t.D,vl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Yh(t.D)}));return bl(t,e)}(t).then((function(){return il(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:rl(t.i)}))):null})).then((function(e){dl(t,e||null)}));return bl(t,n)}(this)),this.h=bl(this,function(t){return t.$.then((function(){return ll(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(el("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.ya=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=vl(t).options.authDomain,n=vl(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Gc(e,n,vl(t).name,t.P),Pc(t.b,t),ml(t)&&Ch(ml(t)),t.m){Ch(t.m);var r=t.m;r.wa(t.la()),Ih(r,t),Eh(r=t.m,t.J),_h(r,t),is((r=t.m).a,t.P),Th(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Vn(this.P.url);t=Yr({protocol:t.c,host:t.a,port:t.g,options:Yr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function sl(t){Qe.call(this,"languageCodeChanged"),this.h=t}function ul(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function cl(t){Qe.call(this,"frameworkChanged"),this.f=t}function hl(t){return t.Oa||ke(new E("auth-domain-config-required"))}function ll(t){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));var e=hl(t).then((function(){return t.b.qa()})).then((function(t){return t?Yr(t):null}));return bl(t,e)}function fl(t,e){var n={};return n.apiKey=vl(t).options.apiKey,n.authDomain=vl(t).options.authDomain,n.appName=vl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new wh(t,e);return n&&(i.ha=n),r&&Eh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return ml(t)&&e.uid==ml(t).uid?(Vh(ml(t),e),t.da(e)):(dl(t,e),Ch(e),t.da(e))})).then((function(){yl(t)}))}function dl(t,e){ml(t)&&(function(t,e){$(t.S,(function(t){return t==e}))}(ml(t),t.Ba),ln(ml(t),"tokenChanged",t.ya),ln(ml(t),"userDeleted",t.za),ln(ml(t),"userInvalidated",t.Aa),Nh(ml(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&Ah(e)),Qr(t,"currentUser",e),e&&(e.wa(t.la()),Ih(e,t),Eh(e,t.J),_h(e,t),is(e.a,t.P),Th(e,t))}function pl(t,e){var n=null,r=null;return bl(t,e.then((function(e){return n=Vo(e),r=Qi(e),fl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Yr({user:ml(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function vl(t){return t.app}function ml(t){return t.currentUser}function gl(t){return ml(t)&&ml(t)._lat||null}function yl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](gl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](gl(t))}}function bl(t,e){return t.R.push(e),e.oa((function(){z(t.R,e)})),e}function wl(){}function Il(){this.a={},this.b=1e12}Jh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Cr()&&"none"!==t)throw n}}(t),ol(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=el(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},I(al,wn),I(sl,Qe),I(ul,Qe),I(cl,Qe),(t=al.prototype).xb=function(t){return bl(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new sl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&gr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,is(this.a,this.P),this.dispatchEvent(new ul(this.P))}},t.Gc=function(t){this.J.push(t),as(this.a,me.SDK_VERSION?Nr(me.SDK_VERSION,this.J):null),this.dispatchEvent(new cl(this.J))},t.Ga=function(){return Q(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:vl(this).options.apiKey,authDomain:vl(this).options.authDomain,appName:vl(this).name,currentUser:ml(this)&&ml(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return pl(i,ws(i.a,o))}))},t.Xc=function(t){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));var e=this,n=Wi(t.providerId),r=Vr(),i=null;(!Pr()||br())&&vl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(vl(this).options.authDomain,vl(this).options.apiKey,vl(this).name,"signInViaPopup",t,null,r,me.SDK_VERSION||null,null,null,this.T(),this.P));var o=pr(i,n&&n.ua,n&&n.ta);return bl(this,n=hl(this).then((function(n){return Vc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new we((function(t,n){e.na("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&dr(o),t?Yr(t):null})).o((function(t){throw o&&dr(o),t})))},t.Yc=function(t){if(!Or())return ke(new E("operation-not-supported-in-this-environment"));var e=this;return bl(this,hl(this).then((function(){return function(t){return ol(t,(function(){return t.b.set(tl,t.c.F,t.a)}))}(e.i)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return ll(this).then((function(e){return t.b&&$c(t.b.b),e})).o((function(e){throw t.b&&$c(t.b.b),e}))},t.dd=function(t){if(!t)return ke(new E("null-user"));if(this.S!=t.tenantId)return ke(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=vl(this).options.apiKey,n.authDomain=vl(this).options.authDomain,n.appName=vl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ja]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new wh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Eh(e,r),Vh(e,t),e}(t,n,e.D,e.Ga());return bl(this,this.h.then((function(){if(vl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ml(e)&&t.uid==ml(e).uid?(Vh(ml(e),t),e.da(t)):(dl(e,r),Ch(r),e.da(r))})).then((function(){yl(e)})))},t.Ab=function(){var t=this;return bl(this,this.h.then((function(){return t.b&&$c(t.b.b),ml(t)?(dl(t,null),rl(t.i).then((function(){yl(t)}))):Ne()})))},t.Zc=function(){var t=this;return il(this.i,vl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ml(t)&&e){n=ml(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Vh(ml(t),e),ml(t).I();(ml(t)||e)&&(dl(t,e),e&&(Ch(e),e.ha=t.D),t.b&&Pc(t.b,t),yl(t))}}))},t.da=function(t){return nl(this.i,t)},t.mc=function(){yl(this),this.da(ml(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return pl(e,Ne(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ml(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),bl(t,t.h.then((function(){!t.l&&H(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(gl(t)))})))}(this,(function(){t.next(ml(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ml(r)):"function"==typeof t.next&&t.next(ml(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(ml(r)):"function"==typeof t.next&&t.next(ml(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return bl(this,this.h.then((function(){return ml(e)?ml(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return pl(e,ru(e.a,Ys,{token:t}))})).then((function(t){var n=t.user;return Fh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return pl(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return pl(n,ru(n.a,As,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return pl(e,t.ka(e.a))}))},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=ml(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return pl(t,t.a.zb()).then((function(e){var n=e.user;return Fh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ml(this)&&ml(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ml(this)&&Ah(ml(this))},t.Pc=function(t){var e=this;q(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&ml(this)&&Nh(ml(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),bl(this,this.h.then((function(){e.l||H(e.s,t)&&t(gl(e))})))},t.removeAuthTokenListener=function(t){$(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(el("local"),t.a,this.ja),this.b&&(Lc(this.b,this),$c(this.b.b)),Promise.resolve()},t.hc=function(t){return bl(this,function(t,e){return ru(t,Ns,{identifier:e,continueUri:Rr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Ro(t)},t.wb=function(t,e){var n=this;return bl(this,Ne().then((function(){var t=new Di(e);if(!t.c)throw new E("argument-error",Ri+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return bl(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return bl(this,this.a.Ra(t).then((function(t){return new ai(t)})))},t.jb=function(t){return bl(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return bl(this,Ne().then((function(){return void 0===e||lt(e)?{}:Ui(new Di(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return bl(this,Zc(this,t,e,b(this.$a,this)))},t.Vc=function(t,e){var n=this;return bl(this,Ne().then((function(){var r=e||cr(),i=Oo(t,r);if(!(r=Ro(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new E("tenant-id-mismatch");return n.$a(i)})))},wl.prototype.render=function(){},wl.prototype.reset=function(){},wl.prototype.getResponse=function(){},wl.prototype.execute=function(){};var Tl=null;function El(t,e){return(e=_l(e))&&t.a[e]||null}function _l(t){return(t=void 0===t?1e12:t)?t.toString():null}function Sl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Al(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function kl(){}Il.prototype.render=function(t,e){return this.a[this.b.toString()]=new Sl(t,e),this.b++},Il.prototype.reset=function(t){var e=El(this,t);t=_l(t),e&&t&&(e.delete(),delete this.a[t])},Il.prototype.getResponse=function(t){return(t=El(this,t))?t.getResponse():null},Il.prototype.execute=function(t){(t=El(this,t))&&t.execute()},Sl.prototype.getResponse=function(){return Al(this),this.b},Sl.prototype.execute=function(){Al(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Sl.prototype.delete=function(){Al(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Qr(Nl,"FACTOR_ID","phone"),kl.prototype.g=function(){return Tl||(Tl=new Il),Ne(Tl)},kl.prototype.c=function(){};var Dl=null;function Cl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new mt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rl=new qr(3e4,6e4);Cl.prototype.g=function(t){var e=this;return new we((function(n,r){var i=setTimeout((function(){r(new E("network-request-failed"))}),Rl.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new E("internal-error"));delete a[e.a]},Ne(Ka(_t(Ol,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Cl.prototype.c=function(){this.b--};var xl=null;function Pl(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Dl||(Dl=new kl),s=Dl):(xl||(xl=new Cl),s=xl),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fl])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vl],!a.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xa(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ll];this.a[Ll]=function(t){if(Ul(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Dr(c,a);"function"==typeof e&&e(t)}};var h=this.a[Ml];this.a[Ml]=function(){if(Ul(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Dr(h,a);"function"==typeof t&&t()}}}var Ll="callback",Ml="expired-callback",Fl="sitekey",Vl="size";function Ul(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jl(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function ql(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,e,n){var r=!1;try{this.b=n||me.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=me.SDK_VERSION?Nr(me.SDK_VERSION,o):null,Pl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,D(S),r)}function Kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Gl.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Gl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=Pl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jl(this,Ne().then((function(){if(Rr()&&!wr())return gr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,js,{})})).then((function(e){t.a[Fl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return jl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ae&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',qt(a.name),'"'),a.type){o.push(' type="',qt(a.type),'"');var s={};pt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=de(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ue(o,a)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return jl(this,this.render().then((function(e){return new we((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Bl,Pl);var Gl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function $l(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Wl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ql(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Yl(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Jl(t){return p(t)&&"string"==typeof t.uid}function Zl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function tf(t,e){for(var n in e){var r=e[n].name;t[r]=rf(r,t[n],e[n].j)}}function ef(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Kl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function nf(t,e,n,r){t[e]=rf(e,n,r)}function rf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Kl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}tf(al.prototype,{jb:{name:"applyActionCode",j:[Hl("code")]},Ra:{name:"checkActionCode",j:[Hl("code")]},nb:{name:"confirmPasswordReset",j:[Hl("code"),Hl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Hl("email"),Hl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Hl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Hl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Zl($l(),Wl(),"nextOrObserver"),Wl("opt_error",!0),Wl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Zl($l(),Wl(),"nextOrObserver"),Wl("opt_error",!0),Wl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Hl("email"),Zl($l("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Hl("email"),$l("actionCodeSettings")]},xb:{name:"setPersistence",j:[Hl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Xl()]},Tc:{name:"signInWithCustomToken",j:[Hl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Hl("email"),Hl("password")]},Vc:{name:"signInWithEmailLink",j:[Hl("email"),Hl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Hl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Zl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof wh)}},Ql(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Hl("url"),$l("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Hl("code")]}}),ef(al.prototype,{lc:{name:"languageCode",kb:Zl(Hl(),Ql(),"languageCode")},ti:{name:"tenantId",kb:Zl(Hl(),Ql(),"tenantId")}}),al.Persistence=Zu,al.Persistence.LOCAL="local",al.Persistence.SESSION="session",al.Persistence.NONE="none",tf(wh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xl()]},qb:{name:"linkWithCredential",j:[Xl()]},Dc:{name:"linkWithPhoneNumber",j:[Hl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xl()]},tb:{name:"reauthenticateWithCredential",j:[Xl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Hl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Zl($l("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},cd:{name:"unlink",j:[Hl("provider")]},Bb:{name:"updateEmail",j:[Hl("email")]},Cb:{name:"updatePassword",j:[Hl("password")]},ed:{name:"updatePhoneNumber",j:[Xl("phone")]},Db:{name:"updateProfile",j:[$l("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Hl("email"),Zl($l("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]}}),tf(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ef(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:zl("appVerificationDisabledForTesting")}}),tf(Jc.prototype,{confirm:{name:"confirm",j:[Hl("verificationCode")]}}),nf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,Do,Po,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Zl(Hl(),$l(),"json")]),nf(Co,"credential",(function(t,e){return new ko(t,e)}),[Hl("email"),Hl("password")]),tf(ko.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),tf(wo.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),nf(wo,"credential",Io,[Zl(Hl(),$l(),"token")]),nf(Co,"credentialWithLink",Oo,[Hl("email"),Hl("emailLink")]),tf(To.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),nf(To,"credential",Eo,[Zl(Hl(),$l(),"token")]),tf(_o.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),nf(_o,"credential",So,[Zl(Hl(),Zl($l(),Ql()),"idToken"),Zl(Hl(),Ql(),"accessToken",!0)]),tf(Ao.prototype,{Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),nf(Ao,"credential",No,[Zl(Hl(),$l(),"token"),Hl("secret",!0)]),tf(bo.prototype,{Ca:{name:"addScope",j:[Hl("scope")]},credential:{name:"credential",j:[Zl(Hl(),Zl($l(),Ql()),"optionsOrIdToken"),Zl(Hl(),Ql(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[$l("customOAuthParameters")]}}),tf(po.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),tf(ho.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),nf(Mo,"credential",Fo,[Hl("verificationId"),Hl("verificationCode")]),tf(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[Zl(Hl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Yl(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Yl(t.session,so)&&Jl(t.multiFactorHint):t.session&&t.multiFactorUid?Yl(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),tf(xo.prototype,{w:{name:"toJSON",j:[Hl(null,!0)]}}),tf(E.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(zo.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(Ho.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(ih.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),tf(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),tf(hh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Hl("displayName",!0)]},bd:{name:"unenroll",j:[Zl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Jl},Hl(),"multiFactorInfoIdentifier")]}}),tf(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(wi,"parseLink",ki,[Hl("link")]),nf(Nl,"assertion",(function(t){return new uh(t)}),[Xl("phone")]),function(){if(void 0===me||!me.INTERNAL||!me.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:al,AuthCredential:uo,Error:E};nf(t,"EmailAuthProvider",Co,[]),nf(t,"FacebookAuthProvider",wo,[]),nf(t,"GithubAuthProvider",To,[]),nf(t,"GoogleAuthProvider",_o,[]),nf(t,"TwitterAuthProvider",Ao,[]),nf(t,"OAuthProvider",bo,[Hl("providerId")]),nf(t,"SAMLAuthProvider",yo,[Hl("providerId")]),nf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof al)}}]),nf(t,"RecaptchaVerifier",Bl,[Zl(Hl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),$l("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof me.app.App)}}]),nf(t,"ActionCodeURL",wi,[]),nf(t,"PhoneMultiFactorGenerator",Nl,[]),me.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new al(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),me.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),me.registerVersion("@firebase/auth","0.16.6"),me.INTERNAL.extendNamespace({User:wh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});class be extends mt{constructor(t){super(),vt(this,t,ye,ge,s,{large:0})}}function we(e){let n,r,i,o,a,s,u,c,h,l,f,d,p,v,m;return u=new be({}),{c(){n=w("div"),r=w("p"),r.textContent="Welcome",i=T(),o=w("div"),a=w("p"),a.textContent="Sigin to google to synd your todos across your devices",s=T(),lt(u.$$.fragment),c=T(),h=w("div"),l=w("p"),l.textContent="contine offline, todos will only be saved locally!",f=T(),d=w("button"),d.textContent="Continue offline",k(r,"class","svelte-5978zf"),k(a,"class","svelte-5978zf"),k(o,"class","online svelte-5978zf"),k(l,"class","svelte-5978zf"),k(d,"class","offlineButton"),k(h,"class","offline svelte-5978zf"),k(n,"class","welcome svelte-5978zf")},m(t,b){y(t,n,b),g(n,r),g(n,i),g(n,o),g(o,a),g(o,s),ft(u,o,null),g(n,c),g(n,h),g(h,l),g(h,f),g(h,d),p=!0,v||(m=_(d,"click",e[0]),v=!0)},p:t,i(t){p||(at(u.$$.fragment,t),p=!0)},o(t){st(u.$$.fragment,t),p=!1},d(t){t&&b(n),dt(u),v=!1,m()}}}function Ie(t){return[()=>{confirm("Are you want to continue offline?")&&bt.set("offline")}]}class Te extends mt{constructor(t){super(),vt(this,t,Ie,we,s,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Ee=function(t,e){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function _e(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Se,Ae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ne=Ne||{},ke=Ae||self;function De(){}function Ce(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Oe(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Re="closure_uid_"+(1e9*Math.random()>>>0),xe=0;function Pe(t,e,n){return t.call.apply(t.bind,arguments)}function Le(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Me(t,e,n){return(Me=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pe:Le).apply(null,arguments)}function Fe(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ve(){return Date.now()}function Ue(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function je(){this.j=this.j,this.i=this.i}je.prototype.j=!1,je.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Re)&&t[Re]||(t[Re]=++xe))},je.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var qe=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Be=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ke(t){return Array.prototype.concat.apply([],arguments)}function Ge(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function He(t){return/^[\s\xa0]*$/.test(t)}var ze,$e=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function We(t,e){return-1!=t.indexOf(e)}function Qe(t,e){return t<e?-1:t>e?1:0}t:{var Xe=ke.navigator;if(Xe){var Ye=Xe.userAgent;if(Ye){ze=Ye;break t}}ze=""}function Je(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ze(t){var e={};for(var n in t)e[n]=t[n];return e}var tn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function en(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<tn.length;o++)n=tn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function nn(t){return nn[" "](t),t}nn[" "]=De;var rn,on,an=We(ze,"Opera"),sn=We(ze,"Trident")||We(ze,"MSIE"),un=We(ze,"Edge"),cn=un||sn,hn=We(ze,"Gecko")&&!(We(ze.toLowerCase(),"webkit")&&!We(ze,"Edge"))&&!(We(ze,"Trident")||We(ze,"MSIE"))&&!We(ze,"Edge"),ln=We(ze.toLowerCase(),"webkit")&&!We(ze,"Edge");function fn(){var t=ke.document;return t?t.documentMode:void 0}t:{var dn="",pn=(on=ze,hn?/rv:([^\);]+)(\)|;)/.exec(on):un?/Edge\/([\d\.]+)/.exec(on):sn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(on):ln?/WebKit\/(\S+)/.exec(on):an?/(?:Version)[ \/]?(\S+)/.exec(on):void 0);if(pn&&(dn=pn?pn[1]:""),sn){var vn=fn();if(null!=vn&&vn>parseFloat(dn)){rn=String(vn);break t}}rn=dn}var mn,gn={};function yn(t){return function(t,e){var n=gn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=$e(String(rn)).split("."),r=$e(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Qe(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Qe(0==a[2].length,0==s[2].length)||Qe(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(ke.document&&sn){var bn=fn();mn=bn||(parseInt(rn,10)||void 0)}else mn=void 0;var wn=mn,In=!sn||9<=Number(wn),Tn=sn&&!yn("9"),En=function(){if(!ke.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ke.addEventListener("test",De,e),ke.removeEventListener("test",De,e)}catch(t){}return t}();function _n(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Sn(t,e){if(_n.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(hn){t:{try{nn(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:An[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}_n.prototype.b=function(){this.defaultPrevented=!0},Ue(Sn,_n);var An={2:"touch",3:"pen",4:"mouse"};Sn.prototype.b=function(){Sn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Tn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Nn="closure_listenable_"+(1e6*Math.random()|0),kn=0;function Dn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++kn,this.Y=this.Z=!1}function Cn(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function On(t){this.src=t,this.a={},this.b=0}function Rn(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qe(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Cn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function xn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}On.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=xn(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Dn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Pn="closure_lm_"+(1e6*Math.random()|0),Ln={};function Mn(t,e,n,r,i){if(r&&r.once)return Vn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mn(t,e[o],n,r,i);return null}return n=zn(n),t&&t[Nn]?t.va(e,n,Oe(r)?!!r.capture:!!r,i):Fn(t,e,n,!1,r,i)}function Fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Oe(i)?!!i.capture:!!i;if(a&&!In)return null;var s=Gn(t);if(s||(t[Pn]=s=new On(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Kn,e=In?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)En||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Vn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vn(t,e[o],n,r,i);return null}return n=zn(n),t&&t[Nn]?t.wa(e,n,Oe(r)?!!r.capture:!!r,i):Fn(t,e,n,!0,r,i)}function Un(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Un(t,e[o],n,r,i);else r=Oe(r)?!!r.capture:!!r,n=zn(n),t&&t[Nn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=xn(o=t.a[e],n,r,i))&&(Cn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=xn(e,n,r,i)),(n=-1<t?e[t]:null)&&jn(n))}function jn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Nn])Rn(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gn(e))?(Rn(n,t),0==n.b&&(n.src=null,e[Pn]=null)):Cn(t)}}}function qn(t){return t in Ln?Ln[t]:Ln[t]="on"+t}function Bn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&jn(t),n.call(r,e)}function Kn(t,e){if(t.Y)return!0;if(!In){if(!e)t:{e=["window","event"];for(var n=ke,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Bn(t,e=new Sn(e,this))}return Bn(t,new Sn(e,this))}function Gn(t){return(t=t[Pn])instanceof On?t:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(t){return"function"==typeof t?t:(t[Hn]||(t[Hn]=function(e){return t.handleEvent(e)}),t[Hn])}function $n(){je.call(this),this.c=new On(this),this.J=this,this.C=null}function Wn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new _n(e,t);else if(e instanceof _n)e.target=e.target||t;else{var i=e;en(e=new _n(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Qn(a,r,!0,e)&&i}if(i=Qn(a=e.a=t,r,!0,e)&&i,i=Qn(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Qn(a=e.a=n[o],r,!1,e)&&i}function Qn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&Rn(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Ue($n,je),$n.prototype[Nn]=!0,(Se=$n.prototype).addEventListener=function(t,e,n,r){Mn(this,t,e,n,r)},Se.removeEventListener=function(t,e,n,r){Un(this,t,e,n,r)},Se.G=function(){if($n.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Cn(n[r]);delete e.a[t],e.b--}}this.C=null},Se.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Se.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Xn=ke.JSON.stringify;function Yn(){this.b=this.a=null}var Jn,Zn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new er}),(function(t){t.reset()}));function tr(){var t=or,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function er(){this.next=this.b=this.a=null}function nr(t){ke.setTimeout((function(){throw t}),0)}function rr(t,e){Jn||function(){var t=ke.Promise.resolve(void 0);Jn=function(){t.then(ar)}}(),ir||(Jn(),ir=!0),or.add(t,e)}Yn.prototype.add=function(t,e){var n=Zn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},er.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},er.prototype.reset=function(){this.next=this.b=this.a=null};var ir=!1,or=new Yn;function ar(){for(var t;t=tr();){try{t.a.call(t.b)}catch(t){nr(t)}var e=Zn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ir=!1}function sr(t,e){$n.call(this),this.b=t||1,this.a=e||ke,this.f=Me(this.Za,this),this.g=Ve()}function ur(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function cr(t,e,n){if("function"==typeof t)n&&(t=Me(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Me(t.handleEvent,t)}return 2147483647<Number(e)?-1:ke.setTimeout(t,e||0)}function hr(t){t.a=cr((function(){t.a=null,t.c&&(t.c=!1,hr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ue(sr,$n),(Se=sr.prototype).aa=!1,Se.M=null,Se.Za=function(){if(this.aa){var t=Ve()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Wn(this,"tick"),this.aa&&(ur(this),this.start()))}},Se.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ve())},Se.G=function(){sr.X.G.call(this),ur(this),delete this.a};var lr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ee(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:hr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ke.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(je);function fr(t){je.call(this),this.b=t,this.a={}}Ue(fr,je);var dr=[];function pr(t,e,n,r){Array.isArray(n)||(n&&(dr[0]=n.toString()),n=dr);for(var i=0;i<n.length;i++){var o=Mn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function vr(t){Je(t.a,(function(t,e){this.a.hasOwnProperty(e)&&jn(t)}),t),t.a={}}function mr(){this.a=!0}function gr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Xn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}fr.prototype.G=function(){fr.X.G.call(this),vr(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mr.prototype.info=function(){};var yr={},br=null;function wr(){return br=br||new $n}function Ir(t){_n.call(this,yr.Fa,t)}function Tr(t){var e=wr();Wn(e,new Ir(e,t))}function Er(t,e){_n.call(this,yr.STAT_EVENT,t),this.stat=e}function _r(t){var e=wr();Wn(e,new Er(e,t))}function Sr(t){_n.call(this,yr.Ga,t)}function Ar(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ke.setTimeout((function(){t()}),e)}yr.Fa="serverreachability",Ue(Ir,_n),yr.STAT_EVENT="statevent",Ue(Er,_n),yr.Ga="timingevent",Ue(Sr,_n);var Nr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},kr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Dr(){}function Cr(t){var e;return(e=t.a)||(e=t.a={}),e}function Or(){}Dr.prototype.a=null;var Rr,xr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Pr(){_n.call(this,"d")}function Lr(){_n.call(this,"c")}function Mr(){}function Fr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new fr(this),this.P=Vr,t=cn?125:void 0,this.R=new sr(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ue(Pr,_n),Ue(Lr,_n),Ue(Mr,Dr),Rr=new Mr;var Vr=45e3,Ur={},jr={};function qr(t,e,n){t.H=1,t.i=ci(ri(e)),t.j=n,t.I=!0,Br(t,null)}function Br(t,e){t.u=Ve(),Hr(t),t.l=ri(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ti(n.b,"t",r),t.D=0,t.a=go(t.g,t.g.C?e:null),0<t.O&&(t.F=new lr(Me(t.Ca,t,t.a),t.O)),pr(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ze(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Tr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Kr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Gr(t,n);if(i==jr){4==e&&(t.h=4,_r(14),r=!1),gr(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ur){t.h=4,_r(15),gr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}gr(t.c,t.f,i,null),Xr(t,i)}4==e&&0==n.length&&(t.h=1,_r(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),uo(e),e.F=!0,_r(11))):(gr(t.c,t.f,n,"[Invalid Chunked Response]"),Qr(t),Wr(t))}function Gr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?jr:(n=Number(e.substring(n,r)),isNaN(n)?Ur:(r+=1)+n>e.length?jr:(e=e.substr(r,n),t.D=r+n,e))}function Hr(t){t.T=Ve()+t.P,zr(t,t.P)}function zr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ar(Me(t.Va,t),e)}function $r(t){t.o&&(ke.clearTimeout(t.o),t.o=null)}function Wr(t){0==t.g.v||t.A||lo(t.g,t)}function Qr(t){$r(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ur(t.R),vr(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Xr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Di(n.b,t)))if(n.I=t.N,!t.C&&Di(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ho(n),Zi(n)}so(n),_r(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ar(Me(n.Sa,n),6e3));if(1>=ki(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else po(n,11)}else if((t.C||n.a==t)&&ho(n),!He(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(We(h,"spdy")||We(h,"quic")||We(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Ci(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ui(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ve()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=mo(u,u.C?u.ga:null,u.fa),d.C){Oi(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&($r(p),Hr(p)),u.a=d}else ao(u);0<n.g.length&&no(n)}else"stop"!=i[0]&&"close"!=i[0]||po(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?po(n,7):Ji(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Tr(4)}catch(t){}}function Yr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ce(t)||"string"==typeof t)Be(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ce(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ce(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Jr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Jr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Zr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ti(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ti(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ti(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Se=Fr.prototype).setTimeout=function(t){this.P=t},Se.Xa=function(t){t=t.target;var e=this.F;e&&3==Wi(t)?e.f():this.Ca(t)},Se.Ca=function(t){try{if(t==this.a)t:{var e=Wi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!cn&&!this.a.$())){this.A||4!=e||7==n||Tr(8==n||0>=r?3:2),$r(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!He(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,_r(12),Qr(this),Wr(this);break t}gr(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Xr(this,u)}this.I?(Kr(this,e,o),cn&&this.b&&3==e&&(pr(this.J,this.R,"tick",this.Wa),this.R.start())):(gr(this.c,this.f,o,null),Xr(this,o)),4==e&&Qr(this),this.b&&!this.A&&(4==e?lo(this.g,this):(this.b=!1,Hr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,_r(12)):(this.h=0,_r(13)),Qr(this),Wr(this)}}}catch(t){}},Se.Wa=function(){if(this.a){var t=Wi(this.a),e=this.a.$();this.D<e.length&&($r(this),Kr(this,t,e),this.b&&4!=t&&Hr(this))}},Se.cancel=function(){this.A=!0,Qr(this)},Se.Va=function(){this.o=null;var t=Ve();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Tr(3),_r(17)),Qr(this),this.h=2,Wr(this)):zr(this,this.T-t)},(Se=Jr.prototype).K=function(){Zr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Se.L=function(){return Zr(this),this.a.concat()},Se.get=function(t,e){return ti(this.b,t)?this.b[t]:e},Se.set=function(t,e){ti(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Se.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ei=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ni(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ni){this.a=void 0!==e?e:t.a,ii(this,t.f),this.j=t.j,oi(this,t.c),ai(this,t.h),this.g=t.g,e=t.b;var n=new yi;n.c=e.c,e.a&&(n.a=new Jr(e.a),n.b=e.b),si(this,n),this.i=t.i}else t&&(n=String(t).match(ei))?(this.a=!!e,ii(this,n[1]||"",!0),this.j=hi(n[2]||""),oi(this,n[3]||"",!0),ai(this,n[4]),this.g=hi(n[5]||"",!0),si(this,n[6]||"",!0),this.i=hi(n[7]||"")):(this.a=!!e,this.b=new yi(null,this.a))}function ri(t){return new ni(t)}function ii(t,e,n){t.f=n?hi(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function oi(t,e,n){t.c=n?hi(e,!0):e}function ai(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function si(t,e,n){e instanceof yi?(t.b=e,function(t,e){e&&!t.f&&(bi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(wi(this,e),Ti(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=li(e,mi)),t.b=new yi(e,t.a))}function ui(t,e,n){t.b.set(e,n)}function ci(t){return ui(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ve()).toString(36)),t}function hi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function li(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ni.prototype.toString=function(){var t=[],e=this.f;e&&t.push(li(e,di,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(li(e,di,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(li(n,"/"==n.charAt(0)?vi:pi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",li(n,gi)),t.join("")};var di=/[#\/\?@]/g,pi=/[#\?:]/g,vi=/[#\?]/g,mi=/[#\?@]/g,gi=/#/g;function yi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function bi(t){t.a||(t.a=new Jr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function wi(t,e){bi(t),e=Ei(t,e),ti(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ti((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Zr(t)))}function Ii(t,e){return bi(t),e=Ei(t,e),ti(t.a.b,e)}function Ti(t,e,n){wi(t,e),0<n.length&&(t.c=null,t.a.set(Ei(t,e),Ge(n)),t.b+=n.length)}function Ei(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Se=yi.prototype).add=function(t,e){bi(this),this.c=null,t=Ei(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Se.forEach=function(t,e){bi(this),this.a.forEach((function(n,r){Be(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Se.L=function(){bi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Se.K=function(t){bi(this);var e=[];if("string"==typeof t)Ii(this,t)&&(e=Ke(e,this.a.get(Ei(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ke(e,t[n])}return e},Se.set=function(t,e){return bi(this),this.c=null,Ii(this,t=Ei(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Se.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Se.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var _i=function(t,e){this.b=t,this.a=e};function Si(t){this.g=t||Ai,ke.PerformanceNavigationTiming?t=0<(t=ke.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(ke.ia&&ke.ia.ya&&ke.ia.ya()&&ke.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ai=10;function Ni(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ki(t){return t.b?1:t.a?t.a.size:0}function Di(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ci(t,e){t.a?t.a.add(e):t.b=e}function Oi(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ri(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=_e(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ge(t.c)}function xi(){}function Pi(){this.a=new xi}function Li(t,e,n){var r=n||"";try{Yr(t,(function(t,n){var i=t;Oe(t)&&(i=Xn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Mi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Si.prototype.cancel=function(){var t,e;if(this.c=Ri(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=_e(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},xi.prototype.stringify=function(t){return ke.JSON.stringify(t,void 0)},xi.prototype.parse=function(t){return ke.JSON.parse(t,void 0)};var Fi=ke.JSON.parse;function Vi(t){$n.call(this),this.headers=new Jr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ui,this.D=this.F=!1}Ue(Vi,$n);var Ui="",ji=/^https?$/i,qi=["POST","PUT"];function Bi(t){return"content-type"==t.toLowerCase()}function Ki(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Gi(t),zi(t)}function Gi(t){t.u||(t.u=!0,Wn(t,"complete"),Wn(t,"error"))}function Hi(t){if(t.b&&void 0!==Ne&&(!t.s[1]||4!=Wi(t)||2!=t.W()))if(t.l&&4==Wi(t))cr(t.za,0,t);else if(Wn(t,"readystatechange"),4==Wi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ei)[1]||null;if(!o&&ke.self&&ke.self.location){var a=ke.self.location.protocol;o=a.substr(0,a.length-1)}i=!ji.test(o?o.toLowerCase():"")}e=i}if(e)Wn(t,"complete"),Wn(t,"success");else{t.h=6;try{var s=2<Wi(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Gi(t)}}finally{zi(t)}}}function zi(t,e){if(t.a){$i(t);var n=t.a,r=t.s[0]?De:null;t.a=null,t.s=null,e||Wn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function $i(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ke.clearTimeout(t.m),t.m=null)}function Wi(t){return t.a?t.a.readyState:0}function Qi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Je(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ui(t,e,n))}function Xi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Yi(t){this.pa=0,this.g=[],this.c=new mr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Xi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Xi("baseRetryDelayMs",5e3,t),this.Ra=Xi("retryDelaySeedMs",1e4,t),this.Ma=Xi("forwardChannelMaxRetries",2,t),this.ma=Xi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Si(t&&t.concurrentRequestLimit),this.ka=new Pi,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ji(t){if(to(t),3==t.v){var e=t.R++,n=ri(t.B);ui(n,"SID",t.J),ui(n,"RID",e),ui(n,"TYPE","terminate"),io(t,n),(e=new Fr(t,t.c,e,void 0)).H=2,e.i=ci(ri(n)),n=!1,ke.navigator&&ke.navigator.sendBeacon&&(n=ke.navigator.sendBeacon(e.i.toString(),"")),!n&&ke.Image&&((new Image).src=e.i,n=!0),n||(e.a=go(e.g,null),e.a.ba(e.i)),e.u=Ve(),Hr(e)}vo(t)}function Zi(t){t.a&&(uo(t),t.a.cancel(),t.a=null)}function to(t){Zi(t),t.j&&(ke.clearTimeout(t.j),t.j=null),ho(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ke.clearTimeout(t.h),t.h=null)}function eo(t,e){t.g.push(new _i(t.Oa++,e)),3==t.v&&no(t)}function no(t){Ni(t.b)||t.h||(t.h=!0,rr(t.Ba,t),t.u=0)}function ro(t,e){var n;n=e?e.f:t.R++;var r=ri(t.B);ui(r,"SID",t.J),ui(r,"RID",n),ui(r,"AID",t.P),io(t,r),t.i&&t.l&&Qi(r,t.i,t.l),n=new Fr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=oo(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ci(t.b,n),qr(n,r,e)}function io(t,e){t.f&&Yr({},(function(t,n){ui(e,n,t)}))}function oo(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Me(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Li(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ao(t){t.a||t.j||(t.T=1,rr(t.Aa,t),t.o=0)}function so(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Ar(Me(t.Aa,t),fo(t,t.o)),t.o++,!0)}function uo(t){null!=t.s&&(ke.clearTimeout(t.s),t.s=null)}function co(t){t.a=new Fr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ri(t.la);ui(e,"RID","rpc"),ui(e,"SID",t.J),ui(e,"CI",t.H?"0":"1"),ui(e,"AID",t.P),io(t,e),ui(e,"TYPE","xmlhttp"),t.i&&t.l&&Qi(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ci(ri(e)),n.j=null,n.I=!0,Br(n,t)}function ho(t){null!=t.m&&(ke.clearTimeout(t.m),t.m=null)}function lo(t,e){var n=null;if(t.a==e){ho(t),uo(t),t.a=null;var r=2}else{if(!Di(t.b,e))return;n=e.s,Oi(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ve()-e.u;var i=t.u;Wn(r=wr(),new Sr(r,n,e,i)),no(t)}else ao(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ki(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ar(Me(t.Ba,t,e),fo(t,t.u)),t.u++,0)))}(t,e)||2==r&&so(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:po(t,5);break;case 4:po(t,10);break;case 3:po(t,6);break;default:po(t,2)}}function fo(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function po(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Me(t.Ya,t);n||(n=new ni("//www.google.com/images/cleardot.gif"),ke.location&&"http"==ke.location.protocol||ii(n,"https"),ci(n)),function(t,e){var n=new mr;if(ke.Image){var r=new Image;r.onload=Fe(Mi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fe(Mi,n,r,"TestLoadImage: error",!1,e),r.onabort=Fe(Mi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fe(Mi,n,r,"TestLoadImage: timeout",!1,e),ke.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else _r(2);t.v=0,t.f&&t.f.ra(e),vo(t),to(t)}function vo(t){t.v=0,t.I=-1,t.f&&(0==Ri(t.b).length&&0==t.g.length||(t.b.c.length=0,Ge(t.g),t.g.length=0),t.f.qa())}function mo(t,e,n){var r=function(t){return t instanceof ni?ri(t):new ni(t,void 0)}(n);if(""!=r.c)e&&oi(r,e+"."+r.c),ai(r,r.h);else{var i=ke.location;r=function(t,e,n,r){var i=new ni(null,void 0);return t&&ii(i,t),e&&oi(i,e),n&&ai(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Je(t.V,(function(t,e){ui(r,e,t)})),e=t.A,n=t.na,e&&n&&ui(r,e,n),ui(r,"VER",t.ha),io(t,r),r}function go(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vi(t.Na)).F=t.C,e}function yo(){}function bo(){if(sn&&!(10<=Number(wn)))throw Error("Environmental error: no available transport.")}function wo(t,e){$n.call(this),this.a=new Yi(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!He(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!He(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Eo(this)}function Io(t){Pr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function To(){Lr.call(this),this.status=1}function Eo(t){this.a=t}(Se=Vi.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Cr(this.H):Cr(Rr),this.a.onreadystatechange=Me(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ki(this,t)}t=n||"";var i=new Jr(this.headers);r&&Yr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Bi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ke.FormData&&t instanceof ke.FormData,!(0<=qe(qi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{$i(this),0<this.o&&((this.D=function(t){return sn&&yn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Me(this.xa,this)):this.m=cr(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ki(this,t)}},Se.xa=function(){void 0!==Ne&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Wn(this,"timeout"),this.abort(8))},Se.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Wn(this,"complete"),Wn(this,"abort"),zi(this))},Se.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),zi(this,!0)),Vi.X.G.call(this)},Se.za=function(){this.j||(this.A||this.l||this.g?Hi(this):this.Ua())},Se.Ua=function(){Hi(this)},Se.W=function(){try{return 2<Wi(this)?this.a.status:-1}catch(t){return-1}},Se.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Se.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Fi(e)}},Se.ua=function(){return this.h},Se.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Se=Yi.prototype).ha=8,Se.v=1,Se.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Fr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?en(r=Ze(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=oo(this,n,e),ui(i=ri(this.B),"RID",t),ui(i,"CVER",22),this.A&&ui(i,"X-HTTP-Session-Id",this.A),io(this,i),this.i&&r&&Qi(i,this.i,r),Ci(this.b,n),this.Ia&&ui(i,"TYPE","init"),this.da?(ui(i,"$req",e),ui(i,"SID","null"),n.U=!0,qr(n,i,null)):qr(n,i,e),this.v=2}}else 3==this.v&&(t?ro(this,t):0==this.g.length||Ni(this.b)||ro(this))},Se.Aa=function(){if(this.j=null,co(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ar(Me(this.Ta,this),t)}},Se.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,_r(10),Zi(this),co(this))},Se.Sa=function(){null!=this.m&&(this.m=null,Zi(this),so(this),_r(19))},Se.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),_r(2)):(this.c.info("Failed to ping google.com"),_r(1))},(Se=yo.prototype).ta=function(){},Se.sa=function(){},Se.ra=function(){},Se.qa=function(){},Se.Ja=function(){},bo.prototype.a=function(t,e){return new wo(t,e)},Ue(wo,$n),wo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;_r(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=mo(t,null,t.fa),no(t)},wo.prototype.close=function(){Ji(this.a)},wo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,eo(this.a,e)}else this.l?((e={}).__data__=Xn(t),eo(this.a,e)):eo(this.a,t)},wo.prototype.G=function(){this.a.f=null,delete this.f,Ji(this.a),delete this.a,wo.X.G.call(this)},Ue(Io,Pr),Ue(To,Lr),Ue(Eo,yo),Eo.prototype.ta=function(){Wn(this.a,"a")},Eo.prototype.sa=function(t){Wn(this.a,new Io(t))},Eo.prototype.ra=function(t){Wn(this.a,new To(t))},Eo.prototype.qa=function(){Wn(this.a,"b")},bo.prototype.createWebChannel=bo.prototype.a,wo.prototype.send=wo.prototype.h,wo.prototype.open=wo.prototype.g,wo.prototype.close=wo.prototype.close,Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,kr.COMPLETE="complete",Or.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",$n.prototype.listen=$n.prototype.va,Vi.prototype.listenOnce=Vi.prototype.wa,Vi.prototype.getLastError=Vi.prototype.Qa,Vi.prototype.getLastErrorCode=Vi.prototype.ua,Vi.prototype.getStatus=Vi.prototype.W,Vi.prototype.getResponseJson=Vi.prototype.Pa,Vi.prototype.getResponseText=Vi.prototype.$,Vi.prototype.send=Vi.prototype.ba;var _o=Nr,So=kr,Ao=yr,No=10,ko=11,Do=Or,Co=Vi,Oo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Oo.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ro={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return It(e,t),e}(Error),Po=new ee("@firebase/firestore");function Lo(){return Po.logLevel}function Mo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Po.logLevel<=Wt.DEBUG){var r=e.map(Uo);Po.debug.apply(Po,Nt(["Firestore (8.6.3): "+t],r))}}function Fo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Po.logLevel<=Wt.ERROR){var r=e.map(Uo);Po.error.apply(Po,Nt(["Firestore (8.6.3): "+t],r))}}function Vo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Po.logLevel<=Wt.WARN){var r=e.map(Uo);Po.warn.apply(Po,Nt(["Firestore (8.6.3): "+t],r))}}function Uo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jo(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+t;throw Fo(e),new Error(e)}function qo(t,e){t||jo()}function Bo(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ko(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Go=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ko(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ho(t,e){return t<e?-1:t>e?1:0}function zo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function $o(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xo(Ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xo(Ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new xo(Ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xo(Ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ho(this.nanoseconds,t.nanoseconds):Ho(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Qo=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Wo(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&jo(),void 0===n?n=t.length-e:n>t.length-e&&jo(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new xo(Ro.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Zo),ea=/^[_a-zA-Z][_a-zA-Z0-9]*$/,na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ea.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new xo(Ro.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new xo(Ro.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xo(Ro.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new xo(Ro.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Zo),ra=function(){function t(t){this.fields=t,t.sort(na.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return zo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ia=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ho(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ia.EMPTY_BYTE_STRING=new ia("");var oa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(t){if(qo(!!t),"string"==typeof t){var e=0,n=oa.exec(t);if(qo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:sa(t.seconds),nanos:sa(t.nanos)}}function sa(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ua(t){return"string"==typeof t?ia.fromBase64String(t):ia.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ca(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ha(t){var e=t.mapValue.fields.__previous_value__;return ca(e)?ha(e):e}function la(t){var e=aa(t.mapValue.fields.__local_write_time__.timestampValue);return new Wo(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fa(t){return null==t}function da(t){return 0===t&&1/t==-1/0}function pa(t){return"number"==typeof t&&Number.isInteger(t)&&!da(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var va=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ta.fromString(e))},t.fromName=function(e){return new t(ta.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ta.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ta.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ta(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ca(t)?4:10:jo()}function ga(t,e){var n=ma(t);if(n!==ma(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return la(t).isEqual(la(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=aa(t.timestampValue),r=aa(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ua(t.bytesValue).isEqual(ua(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return sa(t.geoPointValue.latitude)===sa(e.geoPointValue.latitude)&&sa(t.geoPointValue.longitude)===sa(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return sa(t.integerValue)===sa(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=sa(t.doubleValue),r=sa(e.doubleValue);return n===r?da(n)===da(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],ga);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Xo(n)!==Xo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ga(n[i],r[i])))return!1;return!0}(t,e);default:return jo()}}function ya(t,e){return void 0!==(t.values||[]).find((function(t){return ga(t,e)}))}function ba(t,e){var n=ma(t),r=ma(e);if(n!==r)return Ho(n,r);switch(n){case 0:return 0;case 1:return Ho(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=sa(t.integerValue||t.doubleValue),r=sa(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return wa(t.timestampValue,e.timestampValue);case 4:return wa(la(t),la(e));case 5:return Ho(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ua(t),r=ua(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ho(n[i],r[i]);if(0!==o)return o}return Ho(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ho(sa(t.latitude),sa(e.latitude));return 0!==n?n:Ho(sa(t.longitude),sa(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ba(n[i],r[i]);if(o)return o}return Ho(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Ho(r[a],o[a]);if(0!==s)return s;var u=ba(n[r[a]],i[o[a]]);if(0!==u)return u}return Ho(r.length,o.length)}(t.mapValue,e.mapValue);default:throw jo()}}function wa(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ho(t,e);var n=aa(t),r=aa(e),i=Ho(n.seconds,r.seconds);return 0!==i?i:Ho(n.nanos,r.nanos)}function Ia(t){return Ta(t)}function Ta(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=aa(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ua(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,va.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ta(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ta(t.fields[o])}return e+"}"}(t.mapValue):jo();var e,n}function Ea(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function _a(t){return!!t&&"integerValue"in t}function Sa(t){return!!t&&"arrayValue"in t}function Aa(t){return!!t&&"nullValue"in t}function Na(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ka(t){return!!t&&"mapValue"in t}function Da(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},aa(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Da(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Da(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ca=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ka(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Da(e)},t.prototype.setAll=function(t){var e=this,n=na.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Da(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());ka(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return ga(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];ka(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Yo(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Da(this.value))},t}();function Oa(t){var e=[];return Yo(t.fields,(function(t,n){var r=new na([t]);if(ka(n)){var i=Oa(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new ra(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Ra=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Qo.min(),Ca.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ca.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ca.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ca.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ca.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),xa=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pa(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new xa(t,e,n,r,i,o,a)}function La(t){var e=Bo(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ia(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),fa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Wa(e.startAt)),e.endAt&&(n+="|ub:",n+=Wa(e.endAt)),e.h=n}return e.h}function Ma(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Xa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ga(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ja(t.startAt,e.startAt)&&Ja(t.endAt,e.endAt)}function Fa(t){return va.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Va=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return It(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ua(t,n,r):"array-contains"===n?new Ka(t,r):"in"===n?new Ga(t,r):"not-in"===n?new Ha(t,r):"array-contains-any"===n?new za(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ja(t,n):new qa(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ba(e,this.value)):null!==e&&ma(this.value)===ma(e)&&this.m(ba(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return jo()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ua=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=va.fromName(r.referenceValue),i}return It(e,t),e.prototype.matches=function(t){var e=va.comparator(t.key,this.key);return this.m(e)},e}(Va),ja=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ba("in",n),r}return It(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Va),qa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ba("not-in",n),r}return It(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Va);function Ba(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return va.fromName(t.referenceValue)}))}var Ka=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return It(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Sa(e)&&ya(e.arrayValue,this.value)},e}(Va),Ga=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return It(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ya(this.value.arrayValue,e)},e}(Va),Ha=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return It(e,t),e.prototype.matches=function(t){if(ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ya(this.value.arrayValue,e)},e}(Va),za=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return It(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Sa(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ya(e.value.arrayValue,t)}))},e}(Va),$a=function(t,e){this.position=t,this.before=e};function Wa(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ia(t)})).join(",")}var Qa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ya(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?va.comparator(va.fromName(a.referenceValue),n.key):ba(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ja(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ga(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Za=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function ts(t,e,n,r,i,o,a,s){return new Za(t,e,n,r,i,o,a,s)}function es(t){return new Za(t)}function ns(t){return!fa(t.limit)&&"F"===t.limitType}function rs(t){return!fa(t.limit)&&"L"===t.limitType}function is(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function os(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function as(t){return null!==t.collectionGroup}function ss(t){var e=Bo(t);if(null===e.p){e.p=[];var n=os(e),r=is(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Qa(n)),e.p.push(new Qa(na.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Qa(na.keyField(),u))}}}return e.p}function us(t){var e=Bo(t);if(!e.T)if("F"===e.limitType)e.T=Pa(e.path,e.collectionGroup,ss(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ss(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Qa(o.field,a))}var s=e.endAt?new $a(e.endAt.position,!e.endAt.before):null,u=e.startAt?new $a(e.startAt.position,!e.startAt.before):null;e.T=Pa(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function cs(t,e,n){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hs(t,e){return Ma(us(t),us(e))&&t.limitType===e.limitType}function ls(t){return La(us(t))+"|lt:"+t.limitType}function fs(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ia(e.value);var e})).join(", ")+"]"),fa(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Wa(t.startAt)),t.endAt&&(e+=", endAt: "+Wa(t.endAt)),"Target("+e+")"}(us(t))+"; limitType="+t.limitType+")"}function ds(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):va.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ya(t.startAt,ss(t),e)||t.endAt&&Ya(t.endAt,ss(t),e))}(t,e)}function ps(t){return function(e,n){for(var r=!1,i=0,o=ss(t);i<o.length;i++){var a=o[i],s=vs(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function vs(t,e,n){var r=t.field.isKeyField()?va.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ba(r,i):jo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return jo()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ms(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:da(e)?"-0":e}}function gs(t){return{integerValue:""+t}}function ys(t,e){return pa(e)?gs(e):ms(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bs=function(){this._=void 0};function ws(t,e,n){return t instanceof Es?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof _s?Ss(t,e):t instanceof As?Ns(t,e):function(t,e){var n=Ts(t,e),r=Ds(n)+Ds(t.A);return _a(n)&&_a(t.A)?gs(r):ms(t.R,r)}(t,e)}function Is(t,e,n){return t instanceof _s?Ss(t,e):t instanceof As?Ns(t,e):n}function Ts(t,e){return t instanceof ks?_a(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Es=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e}(bs),_s=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return It(e,t),e}(bs);function Ss(t,e){for(var n=Cs(e),r=function(t){n.some((function(e){return ga(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var As=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return It(e,t),e}(bs);function Ns(t,e){for(var n=Cs(e),r=function(t){n=n.filter((function(e){return!ga(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ks=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return It(e,t),e}(bs);function Ds(t){return sa(t.integerValue||t.doubleValue)}function Cs(t){return Sa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Os=function(t,e){this.field=t,this.transform=e},Rs=function(t,e){this.version=t,this.transformResults=e},xs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ps(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ls=function(){};function Ms(t,e,n){t instanceof qs?function(t,e,n){var r=t.value.clone(),i=Gs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Bs?function(t,e,n){if(Ps(t.precondition,e)){var r=Gs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ks(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Fs(t,e,n){t instanceof qs?function(t,e,n){if(Ps(t.precondition,e)){var r=t.value.clone(),i=Hs(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(js(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Bs?function(t,e,n){if(Ps(t.precondition,e)){var r=Hs(t.fieldTransforms,n,e),i=e.data;i.setAll(Ks(t)),i.setAll(r),e.convertToFoundDocument(js(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ps(t.precondition,e)&&e.convertToNoDocument(Qo.min())}(t,e)}function Vs(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Ts(o.transform,a||null);null!=s&&(null==n&&(n=Ca.empty()),n.set(o.field,s))}return n||null}function Us(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&zo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof _s&&e instanceof _s||t instanceof As&&e instanceof As?zo(t.elements,e.elements,ga):t instanceof ks&&e instanceof ks?ga(t.A,e.A):t instanceof Es&&e instanceof Es}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function js(t){return t.isFoundDocument()?t.version:Qo.min()}var qs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return It(e,t),e}(Ls),Bs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return It(e,t),e}(Ls);function Ks(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Gs(t,e,n){var r=new Map;qo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Is(a,s,n[i]))}return r}function Hs(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,ws(s,u,e))}return r}var zs,$s,Ws=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return It(e,t),e}(Ls),Qs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return It(e,t),e}(Ls),Xs=function(t){this.count=t};function Ys(t){switch(t){case Ro.OK:return jo();case Ro.CANCELLED:case Ro.UNKNOWN:case Ro.DEADLINE_EXCEEDED:case Ro.RESOURCE_EXHAUSTED:case Ro.INTERNAL:case Ro.UNAVAILABLE:case Ro.UNAUTHENTICATED:return!1;case Ro.INVALID_ARGUMENT:case Ro.NOT_FOUND:case Ro.ALREADY_EXISTS:case Ro.PERMISSION_DENIED:case Ro.FAILED_PRECONDITION:case Ro.ABORTED:case Ro.OUT_OF_RANGE:case Ro.UNIMPLEMENTED:case Ro.DATA_LOSS:return!0;default:return jo()}}function Js(t){if(void 0===t)return Fo("GRPC error has no .code"),Ro.UNKNOWN;switch(t){case zs.OK:return Ro.OK;case zs.CANCELLED:return Ro.CANCELLED;case zs.UNKNOWN:return Ro.UNKNOWN;case zs.DEADLINE_EXCEEDED:return Ro.DEADLINE_EXCEEDED;case zs.RESOURCE_EXHAUSTED:return Ro.RESOURCE_EXHAUSTED;case zs.INTERNAL:return Ro.INTERNAL;case zs.UNAVAILABLE:return Ro.UNAVAILABLE;case zs.UNAUTHENTICATED:return Ro.UNAUTHENTICATED;case zs.INVALID_ARGUMENT:return Ro.INVALID_ARGUMENT;case zs.NOT_FOUND:return Ro.NOT_FOUND;case zs.ALREADY_EXISTS:return Ro.ALREADY_EXISTS;case zs.PERMISSION_DENIED:return Ro.PERMISSION_DENIED;case zs.FAILED_PRECONDITION:return Ro.FAILED_PRECONDITION;case zs.ABORTED:return Ro.ABORTED;case zs.OUT_OF_RANGE:return Ro.OUT_OF_RANGE;case zs.UNIMPLEMENTED:return Ro.UNIMPLEMENTED;case zs.DATA_LOSS:return Ro.DATA_LOSS;default:return jo()}}($s=zs||(zs={}))[$s.OK=0]="OK",$s[$s.CANCELLED=1]="CANCELLED",$s[$s.UNKNOWN=2]="UNKNOWN",$s[$s.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$s[$s.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$s[$s.NOT_FOUND=5]="NOT_FOUND",$s[$s.ALREADY_EXISTS=6]="ALREADY_EXISTS",$s[$s.PERMISSION_DENIED=7]="PERMISSION_DENIED",$s[$s.UNAUTHENTICATED=16]="UNAUTHENTICATED",$s[$s.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$s[$s.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$s[$s.ABORTED=10]="ABORTED",$s[$s.OUT_OF_RANGE=11]="OUT_OF_RANGE",$s[$s.UNIMPLEMENTED=12]="UNIMPLEMENTED",$s[$s.INTERNAL=13]="INTERNAL",$s[$s.UNAVAILABLE=14]="UNAVAILABLE",$s[$s.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Zs=function(){function t(t,e){this.comparator=t,this.root=e||eu.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,eu.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,eu.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new tu(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new tu(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new tu(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new tu(this.root,t,this.comparator,!0)},t}(),tu=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),eu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw jo();if(this.right.isRed())throw jo();var t=this.left.check();if(t!==this.right.check())throw jo();return t+(this.isRed()?0:1)},t}();eu.EMPTY=null,eu.RED=!0,eu.BLACK=!1,eu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw jo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw jo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw jo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw jo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw jo()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new eu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var nu=function(){function t(t){this.comparator=t,this.data=new Zs(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ru(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ru(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ru=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),iu=new Zs(va.comparator);function ou(){return iu}var au=new Zs(va.comparator);function su(){return au}var uu=new Zs(va.comparator);var cu=new nu(va.comparator);function hu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=cu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var lu=new nu(Ho);function fu(){return lu}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var du=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Qo.min(),r,fu(),ou(),hu())},t}(),pu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ia.EMPTY_BYTE_STRING,n,hu(),hu(),hu())},t}(),vu=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},mu=function(t,e){this.targetId=t,this.V=e},gu=function(t,e,n,r){void 0===n&&(n=ia.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},yu=function(){function t(){this.S=0,this.D=Iu(),this.C=ia.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=hu(),e=hu(),n=hu();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:jo()}})),new pu(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Iu()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),bu=function(){function t(t){this.W=t,this.G=new Map,this.H=ou(),this.J=wu(),this.Y=new nu(Ho)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:jo()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Fa(i))if(0===n){var o=new va(i.path);this.tt(e,o,Ra.newNoDocument(o,Qo.min()))}else qo(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Fa(o.target)){var a=new va(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Ra.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=hu();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new du(t,n,this.Y,this.H,r);return this.H=ou(),this.J=wu(),this.Y=new nu(Ho),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new yu,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new nu(Ho),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Mo("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new yu),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function wu(){return new Zs(va.comparator)}function Iu(){return new Zs(va.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Tu={asc:"ASCENDING",desc:"DESCENDING"},Eu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_u=function(t,e){this.databaseId=t,this.I=e};function Su(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Au(t,e){return t.I?e.toBase64():e.toUint8Array()}function Nu(t,e){return Su(t,e.toTimestamp())}function ku(t){return qo(!!t),Qo.fromTimestamp(function(t){var e=aa(t);return new Wo(e.seconds,e.nanos)}(t))}function Du(t,e){return function(t){return new ta(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Cu(t){var e=ta.fromString(t);return qo(Zu(e)),e}function Ou(t,e){return Du(t.databaseId,e.path)}function Ru(t,e){var n=Cu(e);if(n.get(1)!==t.databaseId.projectId)throw new xo(Ro.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xo(Ro.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new va(Mu(n))}function xu(t,e){return Du(t.databaseId,e)}function Pu(t){var e=Cu(t);return 4===e.length?ta.emptyPath():Mu(e)}function Lu(t){return new ta(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mu(t){return qo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Fu(t,e,n){return{name:Ou(t,e),fields:n.value.mapValue.fields}}function Vu(t,e){var n;if(e instanceof qs)n={update:Fu(t,e.key,e.value)};else if(e instanceof Ws)n={delete:Ou(t,e.key)};else if(e instanceof Bs)n={update:Fu(t,e.key,e.data),updateMask:Ju(e.fieldMask)};else{if(!(e instanceof Qs))return jo();n={verify:Ou(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Es)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _s)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof As)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ks)return{fieldPath:e.field.canonicalString(),increment:n.A};throw jo()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Nu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:jo()}(t,e.precondition)),n}function Uu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?xs.updateTime(ku(t.updateTime)):void 0!==t.exists?xs.exists(t.exists):xs.none()}(e.currentDocument):xs.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)qo("REQUEST_TIME"===e.setToServerValue),n=new Es;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new _s(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new As(i)}else"increment"in e?n=new ks(t,e.increment):jo();var o=na.fromServerFormat(e.fieldPath);return new Os(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ru(t,e.update.name),o=new Ca({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new ra(e.map((function(t){return na.fromServerFormat(t)})))}(e.updateMask);return new Bs(i,o,a,n,r)}return new qs(i,o,n,r)}if(e.delete){var s=Ru(t,e.delete);return new Ws(s,n)}if(e.verify){var u=Ru(t,e.verify);return new Qs(u,n)}return jo()}function ju(t,e){return{documents:[xu(t,e.path)]}}function qu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=xu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Na(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NAN"}};if(Aa(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Na(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NOT_NAN"}};if(Aa(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wu(t.field),op:$u(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Wu(t.field),direction:zu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||fa(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Gu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Gu(e.endAt)),n}function Bu(t){var e=Pu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Ku(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Qa(Qu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return fa(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Hu(n.startAt));var h=null;return n.endAt&&(h=Hu(n.endAt)),ts(e,i,s,a,u,"F",c,h)}function Ku(t){return t?void 0!==t.unaryFilter?[Yu(t)]:void 0!==t.fieldFilter?[Xu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ku(t)})).reduce((function(t,e){return t.concat(e)})):jo():[]}function Gu(t){return{before:t.before,values:t.position}}function Hu(t){var e=!!t.before,n=t.values||[];return new $a(n,e)}function zu(t){return Tu[t]}function $u(t){return Eu[t]}function Wu(t){return{fieldPath:t.canonicalString()}}function Qu(t){return na.fromServerFormat(t.fieldPath)}function Xu(t){return Va.create(Qu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return jo()}}(t.fieldFilter.op),t.fieldFilter.value)}function Yu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Qu(t.unaryFilter.field);return Va.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Qu(t.unaryFilter.field);return Va.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qu(t.unaryFilter.field);return Va.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qu(t.unaryFilter.field);return Va.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return jo()}}function Ju(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Zu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=nc(e)),e=ec(t.get(n),e);return nc(e)}function ec(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function nc(t){return t+""}function rc(t){var e=t.length;if(qo(e>=2),2===e)return qo(""===t.charAt(0)&&""===t.charAt(1)),ta.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&jo(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:jo()}o=a+2}return new ta(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ic=function(t,e){this.seconds=t,this.nanoseconds=e},oc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};oc.store="owner",oc.key="owner";var ac=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ac.store="mutationQueues",ac.keyPath="userId";var sc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};sc.store="mutations",sc.keyPath="batchId",sc.userMutationsIndex="userMutationsIndex",sc.userMutationsKeyPath=["userId","batchId"];var uc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,tc(e)]},t.key=function(t,e,n){return[t,tc(e),n]},t}();uc.store="documentMutations",uc.PLACEHOLDER=new uc;var cc=function(t,e){this.path=t,this.readTime=e},hc=function(t,e){this.path=t,this.version=e},lc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};lc.store="remoteDocuments",lc.readTimeIndex="readTimeIndex",lc.readTimeIndexPath="readTime",lc.collectionReadTimeIndex="collectionReadTimeIndex",lc.collectionReadTimeIndexPath=["parentPath","readTime"];var fc=function(t){this.byteSize=t};fc.store="remoteDocumentGlobal",fc.key="remoteDocumentGlobalKey";var dc=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};dc.store="targets",dc.keyPath="targetId",dc.queryTargetsIndexName="queryTargetsIndex",dc.queryTargetsKeyPath=["canonicalId","targetId"];var pc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};pc.store="targetDocuments",pc.keyPath=["targetId","path"],pc.documentTargetsIndex="documentTargetsIndex",pc.documentTargetsKeyPath=["path","targetId"];var vc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};vc.key="targetGlobalKey",vc.store="targetGlobal";var mc=function(t,e){this.collectionId=t,this.parent=e};mc.store="collectionParents",mc.keyPath=["collectionId","parent"];var gc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};gc.store="clientMetadata",gc.keyPath="clientId";var yc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};yc.store="bundles",yc.keyPath="bundleId";var bc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};bc.store="namedQueries",bc.keyPath="name";var wc=Nt(Nt([],Nt(Nt([],Nt(Nt([],Nt(Nt([],[ac.store,sc.store,uc.store,lc.store,dc.store,oc.store,vc.store,pc.store]),[gc.store])),[fc.store])),[mc.store])),[yc.store,bc.store]),Ic="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Ec=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},_c=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&jo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Sc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ec,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new kc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=xc(e.target.error);n.ft.reject(new kc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new kc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Mo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Cc(e)},t}(),Ac=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Ot())&&Fo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Mo("SimpleDb","Removing database:",t),Oc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Ot(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Et(this,void 0,void 0,(function(){var e,n=this;return _t(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Mo("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new kc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xo(Ro.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new kc(t,n))},i.onupgradeneeded=function(t){Mo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Mo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,a,s,u;return _t(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return _t(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=Sc.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),_c.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,Mo("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Nc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Oc(this.Pt.delete())},t}(),kc=function(t){function e(e,n){var r=this;return(r=t.call(this,Ro.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return It(e,t),e}(xo);function Dc(t){return"IndexedDbTransactionError"===t.name}var Cc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Mo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Mo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Oc(n)},t.prototype.add=function(t){return Mo("SimpleDb","ADD",this.store.name,t,t),Oc(this.store.add(t))},t.prototype.get=function(t){var e=this;return Oc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Mo("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Mo("SimpleDb","DELETE",this.store.name,t),Oc(this.store.delete(t))},t.prototype.count=function(){return Mo("SimpleDb","COUNT",this.store.name),Oc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Mo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new _c((function(n,r){e.onerror=function(t){var e=xc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new _c((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Nc(i),a=e(i.primaryKey,i.value,o);if(a instanceof _c){var s=a.catch((function(t){return o.done(),_c.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return _c.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Oc(t){return new _c((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=xc(t.target.error);n(e)}}))}var Rc=!1;function xc(t){var e=Ac._t(Ot());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new xo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Rc||(Rc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return It(e,t),e}(Tc);function Lc(t,e){var n=Bo(t);return Ac.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Mc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ms(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Fs(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Fs(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Qo.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),hu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zo(this.mutations,t.mutations,(function(t,e){return Us(t,e)}))&&zo(this.baseMutations,t.baseMutations,(function(t,e){return Us(t,e)}))},t}(),Fc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){qo(e.mutations.length===r.length);for(var i=uu,o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Vc=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Qo.min()),void 0===o&&(o=Qo.min()),void 0===a&&(a=ia.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Uc=function(t){this.Lt=t};function jc(t,e){if(e.document)return function(t,e,n){var r=Ru(t,e.name),i=ku(e.updateTime),o=new Ca({mapValue:{fields:e.fields}}),a=Ra.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=va.fromSegments(e.noDocument.path),r=Hc(e.noDocument.readTime),i=Ra.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=va.fromSegments(e.unknownDocument.path);return r=Hc(e.unknownDocument.version),Ra.newUnknownDocument(o,r)}return jo()}function qc(t,e,n){var r=Bc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ou(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Su(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new lc(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Gc(e.version);return a=e.hasCommittedMutations,new lc(null,new cc(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Gc(e.version);return new lc(new hc(c,h),null,null,!0,r,i)}return jo()}function Bc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Kc(t){var e=new Wo(t[0],t[1]);return Qo.fromTimestamp(e)}function Gc(t){var e=t.toTimestamp();return new ic(e.seconds,e.nanoseconds)}function Hc(t){var e=new Wo(t.seconds,t.nanoseconds);return Qo.fromTimestamp(e)}function zc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Uu(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Uu(t.Lt,e)})),s=Wo.fromMillis(e.localWriteTimeMs);return new Mc(e.batchId,s,n,a)}function $c(t){var e,n,r=Hc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Hc(t.lastLimboFreeSnapshotVersion):Qo.min();return void 0!==t.query.documents?(qo(1===(n=t.query).documents.length),e=us(es(Pu(n.documents[0])))):e=function(t){return us(Bu(t))}(t.query),new Vc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ia.fromBase64String(t.resumeToken))}function Wc(t,e){var n,r=Gc(e.snapshotVersion),i=Gc(e.lastLimboFreeSnapshotVersion);n=Fa(e.target)?ju(t.Lt,e.target):qu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new dc(e.targetId,La(e.target),r,o,e.sequenceNumber,i,n)}function Qc(t){var e=Bu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?cs(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Yc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Hc(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Yc(t).put({bundleId:(n=e).id,createTime:Gc(ku(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Jc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Qc(e.bundledQuery),readTime:Hc(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Jc(t).put(function(t){return{name:t.name,readTime:Gc(ku(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Yc(t){return Lc(t,yc.store)}function Jc(t){return Lc(t,bc.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zc=function(){function t(){this.Bt=new th}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),_c.resolve()},t.prototype.getCollectionParents=function(t,e){return _c.resolve(this.Bt.getEntries(e))},t}(),th=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new nu(ta.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new nu(ta.comparator)).toArray()},t}(),eh=function(){function t(){this.qt=new th}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:tc(i)};return nh(t).put(o)}return _c.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[$o(e),""],!1,!0);return nh(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(rc(o.parent))}return n}))},t}();function nh(t){return Lc(t,mc.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ih=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oh(t,e,n){var r=t.store(sc.store),i=t.store(uc.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){qo(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],d=uc.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return _c.waitFor(o).next((function(){return c}))}function ah(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw jo();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ih.DEFAULT_COLLECTION_PERCENTILE=10,ih.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ih.DEFAULT=new ih(41943040,ih.DEFAULT_COLLECTION_PERCENTILE,ih.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ih.DISABLED=new ih(-1,0,0);var sh=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return qo(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ch(t).$t({index:sc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=hh(t),a=ch(t);return a.add({}).next((function(s){qo("number"==typeof s);for(var u=new Mc(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Vu(t.Lt,e)})),i=n.mutations.map((function(e){return Vu(t.Lt,e)}));return new sc(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new nu((function(t,e){return Ho(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=uc.key(i.userId,p.key.path,s);l=l.add(p.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,uc.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),_c.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ch(t).get(e).next((function(t){return t?(qo(t.userId===n.userId),zc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?_c.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ch(t).$t({index:sc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(qo(e.batchId>=r),o=zc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ch(t).$t({index:sc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ch(t).Nt(sc.userMutationsIndex,n).next((function(t){return t.map((function(t){return zc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=uc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return hh(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=rc(u);if(s===n.userId&&e.path.isEqual(h))return ch(t).get(c).next((function(t){if(!t)throw jo();qo(t.userId===n.userId),o.push(zc(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new nu(Ho),i=[];return e.forEach((function(e){var o=uc.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=hh(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=rc(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),_c.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=uc.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new nu(Ho);return hh(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=rc(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ch(t).get(e).next((function(t){if(null===t)throw jo();qo(t.userId===n.userId),r.push(zc(n.R,t))})))})),_c.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return oh(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),_c.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return _c.resolve();var r=IDBKeyRange.lowerBound(uc.prefixForUser(e.userId)),i=[];return hh(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=rc(t[1]);i.push(o)}else r.done()})).next((function(){qo(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return uh(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return lh(t).get(this.userId).next((function(t){return t||new ac(e.userId,-1,"")}))},t}();function uh(t,e,n){var r=uc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return hh(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function ch(t){return Lc(t,sc.store)}function hh(t){return Lc(t,uc.store)}function lh(t){return Lc(t,ac.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fh=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),dh=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new fh(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Qo.fromTimestamp(new Wo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return ph(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return qo(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ph(t).$t((function(a,s){var u=$c(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return _c.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return ph(t).$t((function(t,n){var r=$c(n);e(r)}))},t.prototype.Xt=function(t){return vh(t).get(vc.key).next((function(t){return qo(null!==t),t}))},t.prototype.Zt=function(t,e){return vh(t).put(vc.key,e)},t.prototype.te=function(t,e){return ph(t).put(Wc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=La(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ph(t).$t({range:r,index:dc.queryTargetsIndexName},(function(t,n,r){var o=$c(n);Ma(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=mh(t);return e.forEach((function(e){var a=tc(e.path);i.push(o.put(new pc(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),_c.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=mh(t);return _c.forEach(e,(function(e){var o=tc(e.path);return _c.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=mh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=mh(t),i=hu();return r.$t({range:n,kt:!0},(function(t,e,n){var r=rc(t[1]),o=new va(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=tc(e.path),r=IDBKeyRange.bound([n],[$o(n)],!1,!0),i=0;return mh(t).$t({index:pc.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return ph(t).get(e).next((function(t){return t?$c(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ph(t){return Lc(t,dc.store)}function vh(t){return Lc(t,vc.store)}function mh(t){return Lc(t,pc.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gh(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){if(t.code!==Ro.FAILED_PRECONDITION||t.message!==Ic)throw t;return Mo("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yh(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Ho(n,i);return 0===a?Ho(r,o):a}var bh=function(){function t(t){this.ne=t,this.buffer=new nu(yh),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();yh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),wh=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Mo("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Et(e,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Dc(e=n.sent())?(Mo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,gh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ih=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return _c.resolve(Oo.o);var r=new bh(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Mo("LruGarbageCollector","Garbage collection skipped; disabled"),_c.resolve(rh)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Mo("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),rh):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Mo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Lo()<=Wt.DEBUG&&Mo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),_c.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Th=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ih(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Eh(t,n)},t.prototype.removeReference=function(t,e,n){return Eh(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Eh(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return lh(t).Ot((function(r){return uh(t,r,e).next((function(t){return t&&(n=!0),_c.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),mh(t).delete([0,tc(a.path)])}))}));i.push(u)}})).next((function(){return _c.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Eh(t,e)},t.prototype.we=function(t,e){var n,r=mh(t),i=Oo.o;return r.$t({index:pc.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Oo.o&&e(new va(rc(n)),i),i=s,n=a):i=Oo.o})).next((function(){i!==Oo.o&&e(new va(rc(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Eh(t,e){return mh(t).put(function(t,e){return new pc(0,tc(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _h=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Yo(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Jo(this.inner)},t}(),Sh=function(){function t(){this.changes=new _h((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Qo.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ra.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?_c.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ah=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Dh(t).put(Ch(e),n)},t.prototype.removeEntry=function(t,e){var n=Dh(t),r=Ch(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Dh(t).get(Ch(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Dh(t).get(Ch(e)).next((function(t){return{document:n.ye(e,t),size:ah(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ou();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ou(),i=new Zs(va.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ah(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return _c.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Dh(t).$t({range:r},(function(t,e,r){for(var a=va.fromSegments(t);o&&va.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ou(),o=e.path.length+1,a={};if(n.isEqual(Qo.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Bc(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=lc.collectionReadTimeIndex}return Dh(t).$t(a,(function(t,n,a){if(t.length===o){var s=jc(r.R,n);e.path.isPrefixOf(s.key.path)?ds(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Nh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return kh(t).get(fc.key).next((function(t){return qo(!!t),t}))},t.prototype.me=function(t,e){return kh(t).put(fc.key,e)},t.prototype.ye=function(t,e){if(e){var n=jc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Qo.min()))return n}return Ra.newInvalidDocument(t)},t}(),Nh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new _h((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return It(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new nu((function(t,e){return Ho(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=qc(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ah(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=qc(e.Ie.R,Ra.newNoDocument(o,Qo.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),_c.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Sh);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kh(t){return Lc(t,fc.store)}function Dh(t){return Lc(t,lc.store)}function Ch(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;qo(n<r&&n>=0&&r<=11);var o=new Sc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(oc.store)}(t),function(t){t.createObjectStore(ac.store,{keyPath:ac.keyPath}),t.createObjectStore(sc.store,{keyPath:sc.keyPath,autoIncrement:!0}).createIndex(sc.userMutationsIndex,sc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(uc.store)}(t),Rh(t),function(t){t.createObjectStore(lc.store)}(t));var a=_c.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(pc.store),t.deleteObjectStore(dc.store),t.deleteObjectStore(vc.store)}(t),Rh(t)),a=a.next((function(){return function(t){var e=t.store(vc.store),n=new vc(0,0,Qo.min().toTimestamp(),0);return e.put(vc.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(sc.store).Nt().next((function(n){t.deleteObjectStore(sc.store),t.createObjectStore(sc.store,{keyPath:sc.keyPath,autoIncrement:!0}).createIndex(sc.userMutationsIndex,sc.userMutationsKeyPath,{unique:!0});var r=e.store(sc.store),i=n.map((function(t){return r.put(t)}));return _c.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(gc.store,{keyPath:gc.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(fc.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(lc.store);e.createIndex(lc.readTimeIndex,lc.readTimeIndexPath,{unique:!1}),e.createIndex(lc.collectionReadTimeIndex,lc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(yc.store,{keyPath:yc.keyPath})}(t),function(t){t.createObjectStore(bc.store,{keyPath:bc.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(lc.store).$t((function(t,n){e+=ah(n)})).next((function(){var n=new fc(e);return t.store(fc.store).put(fc.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ac.store),r=t.store(sc.store);return n.Nt().next((function(n){return _c.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(sc.userMutationsIndex,i).next((function(r){return _c.forEach(r,(function(r){qo(r.userId===n.userId);var i=zc(e.R,r);return oh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(pc.store),n=t.store(lc.store);return t.store(vc.store).get(vc.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new ta(n),a=function(t){return[0,tc(t)]}(o);r.push(e.get(a).next((function(n){return n?_c.resolve():function(n){return e.put(new pc(0,tc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return _c.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(mc.store,{keyPath:mc.keyPath});var n=e.store(mc.store),r=new th,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:tc(i)})}};return e.store(lc.store).$t({kt:!0},(function(t,e){var n=new ta(t);return i(n.popLast())})).next((function(){return e.store(uc.store).$t({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],rc(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(dc.store);return n.$t((function(t,r){var i=$c(r),o=Wc(e.R,i);return n.put(o)}))},t}();function Rh(t){t.createObjectStore(pc.store,{keyPath:pc.keyPath}).createIndex(pc.documentTargetsIndex,pc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(dc.store,{keyPath:dc.keyPath}).createIndex(dc.queryTargetsIndexName,dc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vc.store)}var xh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ph=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new xo(Ro.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Th(this,i),this.Le=n+"main",this.R=new Uc(u),this.Be=new Ac(this.Le,11,new Oh(this.R)),this.qe=new dh(this.referenceDelegate,this.R),this.Ut=new eh,this.Ue=function(t,e){return new Ah(t,e)}(this.R,this.Ut),this.Qe=new Xc,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&Fo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new xo(Ro.FAILED_PRECONDITION,xh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Oo(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Et(e,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Mh(e).put(new gc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Dc(e))return Mo("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Mo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Lh(t).get(oc.key).next((function(t){return _c.resolve(e.tn(t))}))},t.prototype.en=function(t){return Mh(t).delete(this.clientId)},t.prototype.nn=function(){return Et(this,void 0,void 0,(function(){var t,e,n,r,i=this;return _t(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Lc(t,gc.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return _c.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?_c.resolve(!0):Lh(t).get(oc.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new xo(Ro.FAILED_PRECONDITION,xh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Mh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Mo("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Et(this,void 0,void 0,(function(){var t=this;return _t(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[oc.store,gc.store],(function(e){var n=new Pc(e,Oo.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Mh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return sh.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Mo("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,wc,(function(o){return i=new Pc(o,r.Ne?r.Ne.next():Oo.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Fo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new xo(Ro.FAILED_PRECONDITION,Ic);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Lh(t).get(oc.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new xo(Ro.FAILED_PRECONDITION,xh)}))},t.prototype.Ze=function(t){var e=new oc(this.clientId,this.allowTabSynchronization,Date.now());return Lh(t).put(oc.key,e)},t.yt=function(){return Ac.yt()},t.prototype.Xe=function(t){var e=this,n=Lh(t);return n.get(oc.key).next((function(t){return e.tn(t)?(Mo("IndexedDbPersistence","Releasing primary lease."),n.delete(oc.key)):_c.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Fo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Mo("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Fo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Fo("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Lh(t){return Lc(t,oc.store)}function Mh(t){return Lc(t,gc.store)}function Fh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Vh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return va.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):as(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new va(e)).next((function(t){var e=su();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=su();return this.Ut.getCollectionParents(t,i).next((function(a){return _c.forEach(a,(function(a){var s=function(t,e){return new Za(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=Ra.newInvalidDocument(c),r=r.insert(c,h)),Fs(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ds(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=hu(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Bs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Uh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=hu(),i=hu(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),jh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Qo.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(ns(e)||rs(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Lo()<=Wt.DEBUG&&Mo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fs(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new nu(ps(t));return e.forEach((function(e,r){ds(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Lo()<=Wt.DEBUG&&Mo("QueryEngine","Using full collection scan to execute query:",fs(e)),this.Sn.getDocumentsMatchingQuery(t,e,Qo.min())},t}(),qh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Zs(Ho),this.kn=new _h((function(t){return La(t)}),Ma),this.$n=Qo.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Vh(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bh(t,e,n,r){return new qh(t,e,n,r)}function Kh(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o;return _t(this,(function(a){switch(a.label){case 0:return n=Bo(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Vh(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=hu(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,g=v.mutations;m<g.length;m++){var y=g[m];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Gh(t,e){var n=Bo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=_c.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);qo(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Hh(t){var e=Bo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function zh(t,e){var n=Bo(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return qo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=ou();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(function(t,e,n,r,i){var o=hu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ou();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Qo.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Mo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Qo.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return _c.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function $h(t,e){var n=Bo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Wh(t,e){var n=Bo(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,_c.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Vc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Qh(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,a;return _t(this,(function(s){switch(s.label){case 0:r=Bo(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Dc(a=s.sent()))throw a;return Mo("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Xh(t,e,n){var r=Bo(t),i=Qo.min(),o=hu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Bo(t),i=r.kn.get(n);return void 0!==i?_c.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,us(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Qo.min(),n?o:hu())})).next((function(t){return{documents:t,Bn:o}}))}))}function Yh(t,e){var n=Bo(t),r=Bo(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Jh(t){var e=Bo(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Bo(t),i=ou(),o=Bc(n),a=Dh(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:lc.readTimeIndex,range:s},(function(t,e){var n=jc(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Kc(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Zh(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){return[2,(e=Bo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Dh(t),n=Qo.min();return e.$t({index:lc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Kc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tl=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return _c.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:ku(n.createTime)}),_c.resolve()},t.prototype.getNamedQuery=function(t,e){return _c.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Qc(t.bundledQuery),readTime:ku(t.readTime)}}(e)),_c.resolve()},t}(),el=function(){function t(){this.Wn=new nu(nl.Gn),this.zn=new nu(nl.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new nl(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new nl(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new va(new ta([])),r=new nl(n,t),i=new nl(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new va(new ta([])),n=new nl(e,t),r=new nl(e,t+1),i=hu();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new nl(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),nl=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return va.comparator(t.key,e.key)||Ho(t.ns,e.ns)},t.Hn=function(t,e){return Ho(t.ns,e.ns)||va.comparator(t.key,e.key)},t}(),rl=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new nu(nl.Gn)}return t.prototype.checkEmpty=function(t){return _c.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Mc(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new nl(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return _c.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return _c.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return _c.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return _c.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return _c.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new nl(e,0),i=new nl(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),_c.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new nu(Ho);return e.forEach((function(t){var e=new nl(t,0),i=new nl(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),_c.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;va.isDocumentKey(i)||(i=i.child(""));var o=new nl(new va(i),0),a=new nu(Ho);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),_c.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;qo(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return _c.forEach(e.mutations,(function(i){var o=new nl(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new nl(e,0),r=this.rs.firstAfterOrEqual(n);return _c.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,_c.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),il=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Zs(va.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return _c.resolve(n?n.document.clone():Ra.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ou();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ra.newInvalidDocument(t))})),_c.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ou(),i=new va(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||ds(e,c)&&(r=r.insert(c.key,c.clone()))}return _c.resolve(r)},t.prototype.fs=function(t,e){return _c.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new ol(this)},t.prototype.getSize=function(t){return _c.resolve(this.size)},t}(),ol=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return It(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),_c.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Sh),al=function(){function t(t){this.persistence=t,this.ds=new _h((function(t){return La(t)}),Ma),this.lastRemoteSnapshotVersion=Qo.min(),this.highestTargetId=0,this.ws=0,this._s=new el,this.targetCount=0,this.ys=fh.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),_c.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return _c.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return _c.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),_c.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),_c.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new fh(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,_c.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),_c.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,_c.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),_c.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return _c.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return _c.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),_c.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),_c.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),_c.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return _c.resolve(n)},t.prototype.containsKey=function(t,e){return _c.resolve(this._s.containsKey(e))},t}(),sl=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Oo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new al(this),this.Ut=new Zc,this.Ue=function(t,e){return new il(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Uc(e),this.Qe=new tl(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new rl(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Mo("MemoryPersistence","Starting transaction:",t);var i=new ul(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return _c.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),ul=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return It(e,t),e}(Tc),cl=function(){function t(t){this.persistence=t,this.As=new el,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw jo()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),_c.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),_c.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),_c.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _c.forEach(this.vs,(function(r){var i=va.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return _c.or([function(){return _c.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),hl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ll(t,e){return"firestore_clients_"+t+"_"+e}function fl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function dl(t,e){return"firestore_targets_"+t+"_"+e}hl.UNAUTHENTICATED=new hl(null),hl.GOOGLE_CREDENTIALS=new hl("google-credentials-uid"),hl.FIRST_PARTY=new hl("first-party-uid");var pl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new xo(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Fo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xo(i.error.code,i.error.message)),o?new t(e,i.state,r):(Fo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ml=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=fu(),a=0;i&&a<r.activeTargetIds.length;++a)i=pa(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Fo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),gl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Fo("SharedClientState","Failed to parse online state: "+e),null)},t}(),yl=function(){function t(){this.activeTargetIds=fu()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),bl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Zs(Ho),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=ll(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new yl),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Et(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return _t(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(ll(this.persistenceKey,r)))&&(o=ml.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(dl(this.persistenceKey,t));if(n){var r=vl.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(dl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Mo("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Mo("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Mo("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Mo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Fo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Et(e,void 0,void 0,(function(){var t,e,r,i,o,a;return _t(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Oo.o;if(null!=t)try{var n=JSON.parse(t);qo("number"==typeof n),e=n}catch(t){Fo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Oo.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new pl(this.currentUser,t,e,n),i=fl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=fl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=dl(this.persistenceKey,t),i=new vl(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ml.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return pl.Vs(new hl(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return vl.Vs(r,e)},t.prototype.js=function(t){return gl.Vs(t)},t.prototype.ii=function(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Mo("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=fu();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),wl=function(){function t(){this.li=new yl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new yl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Il=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Tl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Mo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Mo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),El={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},_l=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Sl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return It(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new Co;a.listenOnce(So.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case _o.NO_ERROR:var e=a.getResponseJson();Mo("Connection","XHR received:",JSON.stringify(e)),i(e);break;case _o.TIMEOUT:Mo("Connection",'RPC "'+t+'" timed out'),o(new xo(Ro.DEADLINE_EXCEEDED,"Request time out"));break;case _o.HTTP_ERROR:var n=a.getStatus();if(Mo("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ro).indexOf(e)>=0?e:Ro.UNKNOWN}(r.status);o(new xo(s,r.message))}else o(new xo(Ro.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new xo(Ro.UNAVAILABLE,"Connection failed."));break;default:jo()}}finally{Mo("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new bo,o=wr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())||"object"==typeof navigator&&"ReactNative"===navigator.product||Ot().indexOf("Electron/")>=0||function(){var t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Ot().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Mo("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,h=!1,l=new _l({Ei:function(t){h?Mo("Connection","Not sending because WebChannel is closed:",t):(c||(Mo("Connection","Opening WebChannel transport."),u.open(),c=!0),Mo("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,Do.EventType.OPEN,(function(){h||Mo("Connection","WebChannel transport opened.")})),f(u,Do.EventType.CLOSE,(function(){h||(h=!0,Mo("Connection","WebChannel transport closed"),l.Vi())})),f(u,Do.EventType.ERROR,(function(t){h||(h=!0,Vo("Connection","WebChannel transport errored:",t),l.Vi(new xo(Ro.UNAVAILABLE,"The operation could not be completed")))})),f(u,Do.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];qo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Mo("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=zs[t];if(void 0!==e)return Js(e)}(o),s=i.message;void 0===a&&(a=Ro.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new xo(a,s)),u.close()}else Mo("Connection","WebChannel received:",n),l.Si(n)}})),f(o,Ao.STAT_EVENT,(function(t){t.stat===No?Mo("Connection","Detected buffering proxy"):t.stat===ko&&Mo("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Mo("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Mo("RestConnection","Received: ",t),t}),(function(e){throw Vo("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=El[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Al(){return"undefined"!=typeof window?window:null}function Nl(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kl(t){return new _u(t,!0)}var Dl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Mo("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Cl=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Dl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ro.RESOURCE_EXHAUSTED?(Fo(e.toString()),Fo("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Ro.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new xo(Ro.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Et(t,void 0,void 0,(function(){return _t(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Mo("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Mo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ol=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return It(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:jo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(qo(void 0===e||"string"==typeof e),ia.fromBase64String(e||"")):(qo(void 0===e||e instanceof Uint8Array),ia.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ro.UNKNOWN:Js(t.code);return new xo(e,t.message||"")}(s);n=new gu(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ru(t,r.document.name),o=ku(r.document.updateTime);var s=new Ca({mapValue:{fields:r.document.fields}}),u=(a=Ra.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new vu(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ru(t,r.document),o=r.readTime?ku(r.readTime):Qo.min(),s=Ra.newNoDocument(i,o),a=r.removedTargetIds||[],n=new vu([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ru(t,r.document),o=r.removedTargetIds||[],n=new vu([],o,i,null);else{if(!("filter"in e))return jo();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Xs(r),o=h.targetId,n=new mu(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Qo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Qo.min():e.readTime?ku(e.readTime):Qo.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Lu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Fa(r)?{documents:ju(t,r)}:{query:qu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Au(t,e.resumeToken):e.snapshotVersion.compareTo(Qo.min())>0&&(n.readTime=Su(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jo()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Lu(this.R),e.removeTarget=t,this.cr(e)},e}(Cl),Rl=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return It(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(qo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(qo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ku(t.updateTime):ku(e);return n.isEqual(Qo.min())&&(n=ku(e)),new Rs(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ku(t.commitTime);return this.listener.Tr(n,e)}return qo(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Lu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Vu(e.R,t)}))};this.cr(n)},e}(Cl),xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return It(e,t),e.prototype.br=function(){if(this.Rr)throw new xo(Ro.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ro.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xo(Ro.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ro.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xo(Ro.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Pl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Fo(e),this.Vr=!1):Mo("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Ll=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Et(o,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return Gl(this)?(Mo("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return(e=Bo(t)).Or.add(4),[4,Fl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Ml(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Pl(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ml(t){return Et(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:if(!Gl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Fl(t){return Et(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Vl(t,e){var n=Bo(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Kl(n)?Bl(n):af(n).er()&&jl(n,e))}function Ul(t,e){var n=Bo(t),r=af(n);n.$r.delete(e),r.er()&&ql(n,e),0===n.$r.size&&(r.er()?r.ir():Gl(n)&&n.Br.set("Unknown"))}function jl(t,e){t.qr.U(e.targetId),af(t).mr(e)}function ql(t,e){t.qr.U(e),af(t).yr(e)}function Bl(t){t.qr=new bu({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),af(t).start(),t.Br.Sr()}function Kl(t){return Gl(t)&&!af(t).tr()&&t.$r.size>0}function Gl(t){return 0===Bo(t).Or.size}function Hl(t){t.qr=void 0}function zl(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){return t.$r.forEach((function(e,n){jl(t,e)})),[2]}))}))}function $l(t,e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){return Hl(t),Kl(t)?(t.Br.Nr(e),Bl(t)):t.Br.set("Unknown"),[2]}))}))}function Wl(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o;return _t(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof gu&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o;return _t(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Mo("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ql(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof vu?t.qr.X(e):e instanceof mu?t.qr.rt(e):t.qr.et(e),n.isEqual(Qo.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Hh(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(ia.EMPTY_BYTE_STRING,n.snapshotVersion)),ql(t,e);var r=new Vc(n.target,e,1,n.sequenceNumber);jl(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Mo("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Ql(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Ql(t,e,n){return Et(this,void 0,void 0,(function(){var r=this;return _t(this,(function(i){switch(i.label){case 0:if(!Dc(e))throw e;return t.Or.add(1),[4,Fl(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Hh(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Et(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return Mo("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Ml(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Xl(t,e){return e().catch((function(n){return Ql(t,n,e)}))}function Yl(t){return Et(this,void 0,void 0,(function(){var e,n,r,i,o;return _t(this,(function(a){switch(a.label){case 0:e=Bo(t),n=sf(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Gl(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,$h(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=sf(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Ql(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Jl(e)&&Zl(e),[2]}}))}))}function Jl(t){return Gl(t)&&!sf(t).tr()&&t.kr.length>0}function Zl(t){sf(t).start()}function tf(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){return sf(t).Ar(),[2]}))}))}function ef(t){return Et(this,void 0,void 0,(function(){var e,n,r,i;return _t(this,(function(o){for(e=sf(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function nf(t,e,n){return Et(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Fc.from(r,e,n),[4,Xl(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Yl(t)];case 2:return o.sent(),[2]}}))}))}function rf(t,e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return e&&sf(t).pr?[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return Ys(r=e.code)&&r!==Ro.ABORTED?(n=t.kr.shift(),sf(t).sr(),[4,Xl(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Yl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Jl(t)&&Zl(t),[2]}}))}))}function of(t,e){return Et(this,void 0,void 0,(function(){var n;return _t(this,(function(r){switch(r.label){case 0:return n=Bo(t),e?(n.Or.delete(2),[4,Ml(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Fl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function af(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Bo(t);return r.br(),new Ol(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:zl.bind(null,t),Ri:$l.bind(null,t),_r:Wl.bind(null,t)}),t.Mr.push((function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Kl(t)?Bl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Hl(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function sf(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Bo(t);return r.br(),new Rl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:tf.bind(null,t),Ri:rf.bind(null,t),Ir:ef.bind(null,t),Tr:nf.bind(null,t)}),t.Mr.push((function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Yl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Mo("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var uf=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ec,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xo(Ro.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function cf(t,e){if(Fo("AsyncQueue",e+": "+t),Dc(t))return new xo(Ro.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hf=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||va.comparator(e.key,n.key)}:function(t,e){return va.comparator(t.key,e.key)},this.keyedMap=su(),this.sortedSet=new Zs(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),lf=function(){function t(){this.Kr=new Zs(va.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):jo():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),ff=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,hf.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),df=function(){this.Wr=void 0,this.listeners=[]},pf=function(){this.queries=new _h((function(t){return ls(t)}),hs),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vf(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return _t(this,(function(c){switch(c.label){case 0:if(n=Bo(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new df),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=cf(s,"Initialization of query '"+fs(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&bf(n),[2]}}))}))}function mf(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,a;return _t(this,(function(s){return n=Bo(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function gf(t,e){for(var n=Bo(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&bf(n)}function yf(t,e,n){var r=Bo(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function bf(t){t.Gr.forEach((function(t){t.next()}))}var wf=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ff(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=ff.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),If=function(t){this.key=t},Tf=function(t){this.key=t},Ef=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=hu(),this.mutatedKeys=hu(),this.lo=ps(t),this.fo=new hf(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new lf,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=ns(this.query)&&i.size===this.query.limit?i.last():null,c=rs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=ds(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;h&&l?h.data.isEqual(l.data)?f!==d&&(r.track({type:3,doc:l}),p=!0):n.yo(h,l)||(r.track({type:2,doc:l}),p=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),p=!0):h&&!l&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(s=!0)),p&&(l?(a=a.add(l),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),ns(this.query)||rs(this.query))for(;a.size>this.query.limit;){var h=ns(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jo()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new ff(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new lf,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=hu(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Tf(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new If(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=hu();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return ff.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),_f=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Sf=function(t){this.key=t,this.bo=!1},Af=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new _h((function(t){return ls(t)}),hs),this.Vo=new Map,this.So=new Set,this.Do=new Zs(va.comparator),this.Co=new Map,this.No=new el,this.xo={},this.Fo=new Map,this.ko=fh.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nf(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,a,s;return _t(this,(function(u){switch(u.label){case 0:return n=nd(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Wh(n.localStore,us(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,kf(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Vl(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function kf(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,a,s,u,c;return _t(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,a;return _t(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Xh(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(qf(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Xh(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Ef(e,i.Bn),a=o._o(i.documents),s=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),qf(t,n,u.To),c=new _f(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Df(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return n=Bo(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!hs(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Qh(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Ul(n.remoteStore,r.targetId),Uf(n,r.targetId)})).catch(gh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Uf(n,r.targetId),[4,Qh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Cf(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,a;return _t(this,(function(s){switch(s.label){case 0:r=rd(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Bo(t),i=Wo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),hu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Vs(c,n.get(c.key));null!=h&&a.push(new Bs(c.key,h,Oa(h.value.mapValue),xs.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Zs(Ho)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Gf(r,i.changes)];case 3:return s.sent(),[4,Yl(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=cf(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Of(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:n=Bo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(qo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?qo(r.bo):t.removedDocuments.size>0&&(qo(r.bo),r.bo=!1))})),[4,Gf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,gh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Rf(t,e,n){var r=Bo(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Bo(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&bf(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xf(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,a,s,u;return _t(this,(function(c){switch(c.label){case 0:return(r=Bo(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Zs(va.comparator)).insert(o,Ra.newNoDocument(o,Qo.min())),s=hu().add(o),u=new du(Qo.min(),new Map,new nu(Ho),a,s),[4,Of(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Kf(r),[3,4];case 2:return[4,Qh(r.localStore,e,!1).then((function(){return Uf(r,e,n)})).catch(gh)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Pf(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:n=Bo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Gh(n.localStore,e)];case 2:return i=o.sent(),Vf(n,r,null),Ff(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Gf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,gh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Lf(t,e,n){return Et(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:r=Bo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Bo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return qo(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Vf(r,e,n),Ff(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Gf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,gh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Mf(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,a;return _t(this,(function(s){switch(s.label){case 0:Gl((n=Bo(t)).remoteStore)||Mo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Bo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=cf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Ff(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Vf(t,e,n){var r=Bo(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Uf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||jf(t,e)}))}function jf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ul(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Kf(t))}function qf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof If?(t.No.addReference(o.key,e),Bf(t,o)):o instanceof Tf?(Mo("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||jf(t,o.key)):jo()}}function Bf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Mo("SyncEngine","New document in limbo: "+n),t.So.add(r),Kf(t))}function Kf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new va(ta.fromString(e)),r=t.ko.next();t.Co.set(r,new Sf(n)),t.Do=t.Do.insert(n,r),Vl(t.remoteStore,new Vc(us(es(n.path)),r,2,Oo.o))}}function Gf(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,a;return _t(this,(function(s){switch(s.label){case 0:return r=Bo(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Uh.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return _t(this,(function(l){switch(l.label){case 0:n=Bo(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return _c.forEach(e,(function(e){return _c.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return _c.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Dc(r=l.sent()))throw r;return Mo("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Hf(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return(n=Bo(t)).currentUser.isEqual(e)?[3,3]:(Mo("SyncEngine","User change. New user:",e.toKey()),[4,Kh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new xo(Ro.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Gf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function zf(t,e){var n=Bo(t),r=n.Co.get(e);if(r&&r.bo)return hu().add(r.key);var i=hu(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function $f(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return[4,Xh((n=Bo(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&qf(n,e.targetId,i.To),i)]}}))}))}function Wf(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){return[2,Jh((e=Bo(t)).localStore).then((function(t){return Gf(e,t)}))]}))}))}function Qf(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o;return _t(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Bo(t),r=Bo(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):_c.resolve(null)}))}))}((i=Bo(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Yl(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Vf(i,e,r||null),Ff(i,e),function(t,e){Bo(Bo(t)._n).Gt(e)}(i.localStore,e)):jo(),a.label=4;case 4:return[4,Gf(i,o)];case 5:return a.sent(),[3,7];case 6:Mo("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Xf(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return _t(this,(function(h){switch(h.label){case 0:return nd(n=Bo(t)),rd(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Yf(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,of(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],Vl(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Uf(n,e),Qh(n.localStore,e,!0)})),Ul(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,Yf(n,u)];case 5:return h.sent(),function(t){var e=Bo(t);e.Co.forEach((function(t,n){Ul(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Zs(va.comparator)}(n),n.$o=!1,[4,of(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Yf(t,e,n){return Et(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,d,p,v;return _t(this,(function(m){switch(m.label){case 0:n=Bo(t),r=[],i=[],o=0,a=e,m.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Wh(n.localStore,us(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),h=0,l=c,m.label=3;case 3:return h<l.length?(f=l[h],d=n.Po.get(f),[4,$f(n,d)]):[3,6];case 4:(p=m.sent()).snapshot&&i.push(p.snapshot),m.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Yh(n.localStore,s)];case 8:return v=m.sent(),[4,Wh(n.localStore,v)];case 9:return u=m.sent(),[4,kf(n,Jf(v),s,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Jf(t){return ts(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Zf(t){var e=Bo(t);return Bo(Bo(e.localStore).persistence).fn()}function td(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,a;return _t(this,(function(s){switch(s.label){case 0:return(i=Bo(t)).$o?(Mo("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Jh(i.localStore)];case 3:return o=s.sent(),a=du.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Gf(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Qh(i.localStore,e,!0)];case 6:return s.sent(),Uf(i,e,r),[3,8];case 7:jo(),s.label=8;case 8:return[2]}}))}))}function ed(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return _t(this,(function(d){switch(d.label){case 0:if(!(r=nd(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Mo("SyncEngine","Adding an already active target "+a),[3,5]):[4,Yh(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,Wh(r.localStore,s)];case 3:return u=d.sent(),[4,kf(r,Jf(s),u.targetId,!1)];case 4:d.sent(),Vl(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return _t(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Qh(r.localStore,t,!1).then((function(){Ul(r.remoteStore,t),Uf(r,t)})).catch(gh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,d.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function nd(t){var e=Bo(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Of.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xf.bind(null,e),e.vo._r=gf.bind(null,e.eventManager),e.vo.Mo=yf.bind(null,e.eventManager),e}function rd(t){var e=Bo(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lf.bind(null,e),e}var id=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return this.R=kl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Bh(this.persistence,new jh,t.initialUser,this.R)},t.prototype.qo=function(t){return new sl(cl.bs,this.R)},t.prototype.Bo=function(t){return new wl},t.prototype.terminate=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),od=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return It(e,t),e.prototype.initialize=function(e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Zh(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,rd(this.Ko.syncEngine)];case 4:return n.sent(),[4,Yl(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Bh(this.persistence,new jh,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new wh(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Fh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ih.withCacheSize(this.cacheSizeBytes):ih.DEFAULT;return new Ph(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Al(),Nl(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new wl},e}(id),ad=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return It(e,t),e.prototype.initialize=function(e){return Et(this,void 0,void 0,(function(){var n,r=this;return _t(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof bl?(this.sharedClientState.syncEngine={ui:Qf.bind(null,n),ai:td.bind(null,n),hi:ed.bind(null,n),fn:Zf.bind(null,n),ci:Wf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Et(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return[4,Xf(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Al();if(!bl.yt(e))throw new xo(Ro.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Fh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new bl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(od),sd=function(){function t(){}return t.prototype.initialize=function(t,e){return Et(this,void 0,void 0,(function(){var n=this;return _t(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Rf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Hf.bind(null,this.syncEngine),[4,of(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new pf},t.prototype.createDatastore=function(t){var e,n=kl(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Sl(e));return function(t,e,n){return new xl(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Rf(a.syncEngine,t,0)},o=Tl.yt()?new Tl:new Il,new Ll(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Af(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=Bo(t),Mo("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Fl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),ud=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),cd=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Et(this,void 0,void 0,(function(){var e,n=this;return _t(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new xo(Ro.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,a,s;return _t(this,(function(u){switch(u.label){case 0:return n=Bo(t),r=Lu(n.R)+"/documents",i={documents:e.map((function(t){return Ou(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){qo(!!e.found),e.found.name,e.found.updateTime;var n=Ru(t,e.found.name),r=ku(e.found.updateTime),i=new Ca({mapValue:{fields:e.found.fields}});return Ra.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){qo(!!e.missing),qo(!!e.readTime);var n=Ru(t,e.missing),r=ku(e.readTime);return Ra.newNoDocument(n,r)}(t,e):jo()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());qo(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ws(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Et(this,void 0,void 0,(function(){var t,e=this;return _t(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=va.fromPath(n);e.mutations.push(new Qs(r,e.precondition(r)))})),[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return n=Bo(t),r=Lu(n.R)+"/documents",i={writes:e.map((function(t){return Vu(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw jo();e=Qo.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new xo(Ro.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?xs.updateTime(e):xs.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Qo.min()))throw new xo(Ro.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xs.updateTime(e)}return xs.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),hd=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Dl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Et(t,void 0,void 0,(function(){var t,e,n=this;return _t(this,(function(r){return t=new cd(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!fa(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ys(e)}return!1},t}(),ld=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=hl.UNAUTHENTICATED,this.clientId=Go.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Et(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return Mo("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new xo(Ro.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ec;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Et(t,void 0,void 0,(function(){var t,n;return _t(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=cf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function fd(t,e){return Et(this,void 0,void 0,(function(){var n,r,i=this;return _t(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Mo("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Et(i,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Kh(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function dd(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,pd(t)];case 1:return n=i.sent(),Mo("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return(n=Bo(t)).asyncQueue.verifyOperationInProgress(),Mo("RemoteStore","RemoteStore received new credentials"),r=Gl(n),n.Or.add(3),[4,Fl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Ml(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function pd(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Mo("FirestoreClient","Using default OfflineComponentProvider"),[4,fd(t,new id)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function vd(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Mo("FirestoreClient","Using default OnlineComponentProvider"),[4,dd(t,new sd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function md(t){return pd(t).then((function(t){return t.persistence}))}function gd(t){return pd(t).then((function(t){return t.localStore}))}function yd(t){return vd(t).then((function(t){return t.remoteStore}))}function bd(t){return vd(t).then((function(t){return t.syncEngine}))}function wd(t){return Et(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,vd(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Nf.bind(null,e.syncEngine),n.onUnlisten=Df.bind(null,e.syncEngine),n)]}}))}))}function Id(t,e,n){var r=this;void 0===n&&(n={});var i=new Ec;return t.asyncQueue.enqueueAndForget((function(){return Et(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ud({next:function(o){e.enqueueAndForget((function(){return mf(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new xo(Ro.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new xo(Ro.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new wf(es(n.path),o,{includeMetadataChanges:!0,so:!0});return vf(t,a)},[4,wd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Td(t,e,n){var r=this;void 0===n&&(n={});var i=new Ec;return t.asyncQueue.enqueueAndForget((function(){return Et(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ud({next:function(n){e.enqueueAndForget((function(){return mf(t,a)})),n.fromCache&&"server"===r.source?i.reject(new xo(Ro.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new wf(n,o,{includeMetadataChanges:!0,so:!0});return vf(t,a)},[4,wd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Ed=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},_d=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Sd=new Map,Ad=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Nd=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(hl.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),kd=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Dd=function(){function t(t){var e=this;this.currentUser=hl.UNAUTHENTICATED,this.oc=new Ec,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Mo("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.uc&&(Mo("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Mo("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(qo("string"==typeof n.accessToken),new Ad(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return qo(null===t||"string"==typeof t),new hl(t)},t.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable((function(){return Et(t,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}}))}))})))},t}(),Cd=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=hl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),Od=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new Cd(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(hl.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rd(t,e,n){if(!n)throw new xo(Ro.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function xd(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xo(Ro.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Pd(t,e,n,r){if(!0===e&&!0===r)throw new xo(Ro.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ld(t){if(!va.isDocumentKey(t))throw new xo(Ro.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Md(t){if(va.isDocumentKey(t))throw new xo(Ro.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Fd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":jo()}function Vd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xo(Ro.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fd(t);throw new xo(Ro.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ud(t,e){if(e<=0)throw new xo(Ro.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new xo(Ro.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xo(Ro.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Pd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),qd=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jd({}),this._settingsFrozen=!1,t instanceof _d?(this._databaseId=t,this._credentials=new Nd):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new xo(Ro.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(t.options.projectId)}(t),this._credentials=new Dd(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new xo(Ro.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new xo(Ro.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Nd;switch(t.type){case"gapi":var e=t.client;return qo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Od(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xo(Ro.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Sd.get(this))&&(Mo("ComponentProvider","Removing Datastore"),Sd.delete(this),t.terminate()),Promise.resolve();var t},t}(),Bd=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Gd(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Kd=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Gd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,es(r))||this)._path=r,i.type="collection",i}return It(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Bd(this.firestore,null,new va(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Kd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=qt(t),Rd("collection","path",e),t instanceof qd)return Md(n=ta.fromString.apply(ta,Nt([e],r))),new Gd(t,null,n);if(!(t instanceof Bd||t instanceof Gd))throw new xo(Ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Md(n=ta.fromString.apply(ta,Nt([t.path],r)).child(ta.fromString(e))),new Gd(t.firestore,null,n)}function zd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=qt(t),1===arguments.length&&(e=Go.u()),Rd("doc","path",e),t instanceof qd)return Ld(n=ta.fromString.apply(ta,Nt([e],r))),new Bd(t,null,new va(n));if(!(t instanceof Bd||t instanceof Gd))throw new xo(Ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ld(n=t._path.child(ta.fromString.apply(ta,Nt([e],r)))),new Bd(t.firestore,t instanceof Gd?t.converter:null,new va(n))}function $d(t,e){return t=qt(t),e=qt(e),(t instanceof Bd||t instanceof Gd)&&(e instanceof Bd||e instanceof Gd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Wd(t,e){return t=qt(t),e=qt(e),t instanceof Kd&&e instanceof Kd&&t.firestore===e.firestore&&hs(t._query,e._query)&&t.converter===e.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Qd=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new Dl(this,"async_queue_retry"),this.Ac=function(){var e=Nl();e&&Mo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Nl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=Nl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return Et(this,void 0,void 0,(function(){var t,e=this;return _t(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!Dc(t=n.sent()))throw t;return Mo("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,Fo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=uf.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&jo()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return Et(this,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function Xd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Yd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Qd,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return It(e,t),e.prototype._terminate=function(){return this._firestoreClient||Zd(this),this._firestoreClient.terminate()},e}(qd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jd(t){return t._firestoreClient||Zd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Zd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ed(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ld(t._credentials,t._queue,r)}function tp(t,e,n){var r=this,i=new Ec;return t.asyncQueue.enqueue((function(){return Et(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fd(t,n)];case 1:return o.sent(),[4,dd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ro.FAILED_PRECONDITION||t.code===Ro.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function ep(t){if(t._initialized||t._terminated)throw new xo(Ro.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var np=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new xo(Ro.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new na(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),rp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ia.fromBase64String(e))}catch(e){throw new xo(Ro.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ia.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ip=function(t){this._methodName=t},op=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new xo(Ro.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xo(Ro.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ho(this._lat,t._lat)||Ho(this._long,t._long)},t}(),ap=/^__.*__$/,sp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Bs(t,this.data,this.fieldMask,e,this.fieldTransforms):new qs(t,this.data,e,this.fieldTransforms)},t}(),up=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Bs(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jo()}}var hp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Oc(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},t.prototype.Bc=function(t){return Cp(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},t.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(cp(this.xc)&&ap.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),lp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||kl(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new hp({xc:t,methodName:e,Uc:n,path:na.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function fp(t){var e=t._freezeSettings(),n=kl(t._databaseId);return new lp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dp(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);Ap("Data must be an object, but it was:",a,r);var s,u,c=_p(r,a);if(o.merge)s=new ra(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var d=Np(e,f[l],n);if(!a.contains(d))throw new xo(Ro.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Op(h,d)||h.push(d)}s=new ra(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new sp(new Ca(c),s,u)}var pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw 1===t.xc?t.Bc(this._methodName+"() can only appear at the top level of your update data"):t.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ip);function vp(t,e,n){return new hp({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var mp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype._toFieldTransform=function(t){return new Os(t.path,new Es)},e.prototype.isEqual=function(t){return t instanceof e},e}(ip),gp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return It(e,t),e.prototype._toFieldTransform=function(t){var e=vp(this,t,!0),n=this.Kc.map((function(t){return Ep(t,e)})),r=new _s(n);return new Os(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ip),yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return It(e,t),e.prototype._toFieldTransform=function(t){var e=vp(this,t,!0),n=this.Kc.map((function(t){return Ep(t,e)})),r=new As(n);return new Os(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ip),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return It(e,t),e.prototype._toFieldTransform=function(t){var e=new ks(t.R,ys(t.R,this.jc));return new Os(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ip);function wp(t,e,n,r){var i=t.Qc(1,e,n);Ap("Data must be an object, but it was:",i,r);var o=[],a=Ca.empty();Yo(r,(function(t,r){var s=Dp(e,t,n);r=qt(r);var u=i.Mc(s);if(r instanceof pp)o.push(s);else{var c=Ep(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new ra(o);return new up(a,s,i.fieldTransforms)}function Ip(t,e,n,r,i,o){var a=t.Qc(1,e,n),s=[Np(e,r,n)],u=[i];if(o.length%2!=0)throw new xo(Ro.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Np(e,o[c])),u.push(o[c+1]);for(var h=[],l=Ca.empty(),f=s.length-1;f>=0;--f)if(!Op(h,s[f])){var d=s[f],p=u[f];p=qt(p);var v=a.Mc(d);if(p instanceof pp)h.push(d);else{var m=Ep(p,v);null!=m&&(h.push(d),l.set(d,m))}}var g=new ra(h);return new up(l,g,a.fieldTransforms)}function Tp(t,e,n,r){return void 0===r&&(r=!1),Ep(n,t.Qc(r?4:3,e))}function Ep(t,e){if(Sp(t=qt(t)))return Ap("Unsupported field value:",e,t),_p(t,e);if(t instanceof ip)return function(t,e){if(!cp(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Ep(o[i],e.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=qt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ys(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Wo.fromDate(t);return{timestampValue:Su(e.R,n)}}if(t instanceof Wo)return n=new Wo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Su(e.R,n)};if(t instanceof op)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rp)return{bytesValue:Au(e.R,t._byteString)};if(t instanceof Bd){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Du(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+Fd(t))}(t,e)}function _p(t,e){var n={};return Jo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,(function(t,r){var i=Ep(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Sp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wo||t instanceof op||t instanceof rp||t instanceof Bd||t instanceof ip)}function Ap(t,e,n){if(!Sp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Fd(n);throw"an object"===r?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function Np(t,e,n){if((e=qt(e))instanceof np)return e._internalPath;if("string"==typeof e)return Dp(t,e);throw Cp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var kp=new RegExp("[~\\*/\\[\\]]");function Dp(t,e,n){if(e.search(kp)>=0)throw Cp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(np.bind.apply(np,Nt([void 0],e.split(".")))))._internalPath}catch(r){throw Cp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cp(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new xo(Ro.INVALID_ARGUMENT,(s+=". ")+t+u)}function Op(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Rp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Bd(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new xp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Pp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Rp);function Pp(t,e){return"string"==typeof e?Dp(t,e):e instanceof np?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Mp=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return It(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Fp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Pp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Rp),Fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Mp),Vp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Lp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Fp(n._firestore,n._userDataWriter,r.key,r,new Lp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xo(Ro.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Fp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Lp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Fp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Lp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Up(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Up(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jo()}}function jp(t,e){return t instanceof Mp&&e instanceof Mp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Vp&&e instanceof Vp&&t._firestore===e._firestore&&Wd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qp(t){if(rs(t)&&0===t.explicitOrderBy.length)throw new xo(Ro.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bp=function(){};function Kp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return It(e,t),e.prototype._apply=function(t){var e=fp(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xo(Ro.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Yp(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(Xp(r,t,l))}s={arrayValue:{values:u}}}else s=Xp(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Yp(a,o),s=Tp(n,"where",a,"in"===o||"not-in"===o);var f=Va.create(i,o,s);return function(t,e){if(e.g()){var n=os(t);if(null!==n&&!n.isEqual(e.field))throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=is(t);null!==r&&Jp(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new xo(Ro.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new xo(Ro.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new Kd(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Bp),Hp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return It(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qa(e,n);return function(t,e){if(null===is(t)){var n=os(t);null!==n&&Jp(t,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new Kd(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Za(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Bp),zp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return It(e,t),e.prototype._apply=function(t){return new Kd(t.firestore,t.converter,cs(t._query,this.Jc,this.Yc))},e}(Bp),$p=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return It(e,t),e.prototype._apply=function(t){var e=Qp(t,this.type,this.Xc,this.Zc);return new Kd(t.firestore,t.converter,function(t,e){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Bp),Wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return It(e,t),e.prototype._apply=function(t){var e=Qp(t,this.type,this.Xc,this.Zc);return new Kd(t.firestore,t.converter,function(t,e){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Bp);function Qp(t,e,n,r){if(n[0]=qt(n[0]),n[0]instanceof Rp)return function(t,e,n,r,i){if(!r)throw new xo(Ro.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=ss(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Ea(e,r.key));else{var c=r.data.field(u.field);if(ca(c))throw new xo(Ro.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new $a(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=fp(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new xo(Ro.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!as(t)&&-1!==c.indexOf("/"))throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ta.fromString(c));if(!va.isDocumentKey(h))throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new va(h);s.push(Ea(e,l))}else{var f=Tp(n,r,c);s.push(f)}}return new $a(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Xp(t,e,n){if("string"==typeof(n=qt(n))){if(""===n)throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!as(e)&&-1!==n.indexOf("/"))throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ta.fromString(n));if(!va.isDocumentKey(r))throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ea(t,new va(r))}if(n instanceof Bd)return Ea(t,n._key);throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Fd(n)+".")}function Yp(t,e){if(!Array.isArray(t)||0===t.length)throw new xo(Ro.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new xo(Ro.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Jp(t,e,n){if(!n.isEqual(e))throw new xo(Ro.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ma(t)){case 0:return null;case 1:return t.booleanValue;case 2:return sa(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ua(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw jo()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Yo(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new op(sa(t.latitude),sa(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ha(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(la(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=aa(t);return new Wo(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ta.fromString(t);qo(Zu(n));var r=new _d(n.get(1),n.get(3)),i=new va(n.popFirst(5));return r.isEqual(e)||Fo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ev=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return It(e,t),e.prototype.convertBytes=function(t){return new rp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bd(this.firestore,null,e)},e}(Zp),nv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=rv(t,this._firestore),i=tv(r.converter,e,n),o=dp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,xs.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=rv(t,this._firestore);return o="string"==typeof(e=qt(e))||e instanceof np?Ip(this._dataReader,"WriteBatch.update",a._key,e,n,r):wp(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,xs.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=rv(t,this._firestore);return this._mutations=this._mutations.concat(new Ws(e._key,xs.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new xo(Ro.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rv(t,e){if((t=qt(t)).firestore!==e)throw new xo(Ro.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var iv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return It(e,t),e.prototype.convertBytes=function(t){return new rp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bd(this.firestore,null,e)},e}(Zp);function ov(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Vd(t,Bd);var o=Vd(t.firestore,Yd),a=fp(o);return sv(o,[("string"==typeof(e=qt(e))||e instanceof np?Ip(a,"updateDoc",t._key,e,n,r):wp(a,"updateDoc",t._key,e)).toMutation(t._key,xs.exists(!0))])}function av(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=qt(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Xd(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(Xd(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Bd)c=Vd(t.firestore,Yd),h=es(t._key.path),u={next:function(e){i[s]&&i[s](uv(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=Vd(t,Kd);c=Vd(d.firestore,Yd),h=d._query;var p=new iv(c);u={next:function(t){i[s]&&i[s](new Vp(c,p,d,t))},error:i[s+1],complete:i[s+2]},qp(t._query)}return function(t,e,n,r){var i=this,o=new ud(r),a=new wf(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Et(i,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=vf,[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Et(i,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=mf,[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Jd(c),h,l,u)}function sv(t,e){return function(t,e){var n=this,r=new Ec;return t.asyncQueue.enqueueAndForget((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=Cf,[4,bd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Jd(t),e)}function uv(t,e,n){var r=n.docs.get(e._key),i=new iv(t);return new Mp(t,i,e._key,r,new Lp(n.hasPendingWrites,n.fromCache),e.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return It(e,t),e.prototype.get=function(e){var n=this,r=rv(e,this._firestore),i=new iv(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Mp(n._firestore,i,r._key,t._document,new Lp(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=fp(t)}return t.prototype.get=function(t){var e=this,n=rv(t,this._firestore),r=new ev(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return jo();var i=t[0];if(i.isFoundDocument())return new Rp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Rp(e._firestore,r,n._key,null,n.converter);throw jo()}))},t.prototype.set=function(t,e,n){var r=rv(t,this._firestore),i=tv(r.converter,e,n),o=dp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=rv(t,this._firestore);return o="string"==typeof(e=qt(e))||e instanceof np?Ip(this._dataReader,"Transaction.update",a._key,e,n,r):wp(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=rv(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hv(){if("undefined"==typeof Uint8Array)throw new xo(Ro.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function lv(){if("undefined"==typeof atob)throw new xo(Ro.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fv=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return lv(),new t(rp.fromBase64String(e))},t.fromUint8Array=function(e){return hv(),new t(rp.fromUint8Array(e))},t.prototype.toBase64=function(){return lv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return hv(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),dv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ep(t=Vd(t,Yd));var n=Jd(t),r=t._freezeSettings(),i=new sd;return tp(n,i,new od(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ep(t=Vd(t,Yd));var e=Jd(t),n=t._freezeSettings(),r=new sd;return tp(e,r,new ad(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new xo(Ro.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ec;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Et(e,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return Ac.yt()?(e=t+"main",[4,Ac.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Fh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),pv=function(){function t(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof _d||(this.eu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Vo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Vd(t,qd))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Vo("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Tt({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kt.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),kt.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new xo(Ro.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new kd(new Ad(o,new hl(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Et(e,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,md(t)];case 1:return e=r.sent(),[4,yd(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Bo(t);return e.Or.delete(0),Ml(e)}(n))]}}))}))}))}(Jd(Vd(this._delegate,Yd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Et(e,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,md(t)];case 1:return e=r.sent(),[4,yd(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return(e=Bo(t)).Or.add(0),[4,Fl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Jd(Vd(this._delegate,Yd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Pd("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ec;return t.asyncQueue.enqueueAndForget((function(){return Et(e,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:return e=Mf,[4,bd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Jd(Vd(this._delegate,Yd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ud(e);return t.asyncQueue.enqueueAndForget((function(){return Et(n,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=function(t,e){Bo(t).Gr.add(e),e.next()},[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Et(n,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=function(t,e){Bo(t).Gr.delete(e)},[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Jd(t=Vd(t,Yd)),Xd(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.eu)throw new xo(Ro.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new kv(this,Hd(this._delegate,t))}catch(t){throw wv(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new bv(this,zd(this._delegate,t))}catch(t){throw wv(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Sv(this,function(t,e){if(t=Vd(t,qd),Rd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xo(Ro.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Kd(t,null,function(t){return new Za(ta.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw wv(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ec;return t.asyncQueue.enqueueAndForget((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return[4,function(t){return vd(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new hd(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Jd(t),(function(n){return e(new cv(t,n))}))}(this._delegate,(function(n){return t(new mv(e,n))}))},t.prototype.batch=function(){var t=this;return Jd(this._delegate),new gv(new nv(this._delegate,(function(e){return sv(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new xo(Ro.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new xo(Ro.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),vv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return It(e,t),e.prototype.convertBytes=function(t){return new fv(new rp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return bv.nu(e,this.firestore,null)},e}(Zp);var mv=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new vv(t)}return t.prototype.get=function(t){var e=this,n=Dv(t);return this._delegate.get(n).then((function(t){return new Ev(e._firestore,new Mp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Dv(t);return n?(xd("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Dv(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Nt([a,e,n],i)),this},t.prototype.delete=function(t){var e=Dv(t);return this._delegate.delete(e),this},t}(),gv=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Dv(t);return n?(xd("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Dv(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Nt([a,e,n],i)),this},t.prototype.delete=function(t){var e=Dv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),yv=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Fp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new _v(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.su=function(e,n){var r=t.iu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new vv(e),n),i.set(n,o)),o},t}();yv.iu=new WeakMap;var bv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vv(t)}return t.ru=function(e,n,r){if(e.length%2!=0)throw new xo(Ro.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Bd(n._delegate,r,new va(e)))},t.nu=function(e,n,r){return new t(n,new Bd(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new kv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new kv(this.firestore,Hd(this._delegate,t))}catch(t){throw wv(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=qt(t))instanceof Bd&&$d(this._delegate,t)},t.prototype.set=function(t,e){e=xd("DocumentReference.set",e);try{return function(t,e,n){t=Vd(t,Bd);var r=Vd(t.firestore,Yd),i=tv(t.converter,e,n);return sv(r,[dp(fp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,xs.none())])}(this._delegate,t,e)}catch(t){throw wv(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ov(this._delegate,t):ov.apply(void 0,Nt([this._delegate,t,e],n))}catch(t){throw wv(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return sv(Vd((t=this._delegate).firestore,Yd),[new Ws(t._key,xs.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Iv(e),i=Tv(e,(function(e){return new Ev(t.firestore,new Mp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return av(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vd(t,Bd);var e=Vd(t.firestore,Yd),n=Jd(e),r=new iv(e);return function(t,e){var n=this,r=new Ec;return t.asyncQueue.enqueueAndForget((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Et(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Bo(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new xo(Ro.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=cf(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,gd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Mp(e,r,t._key,n,new Lp(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vd(t,Bd);var e=Vd(t.firestore,Yd);return Id(Jd(e),t._key,{source:"server"}).then((function(n){return uv(e,t,n)}))}(this._delegate):function(t){t=Vd(t,Bd);var e=Vd(t.firestore,Yd);return Id(Jd(e),t._key).then((function(n){return uv(e,t,n)}))}(this._delegate)).then((function(t){return new Ev(e.firestore,new Mp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(yv.su(this.firestore,e)):this._delegate.withConverter(null))},t}();function wv(t,e,n){return t.message=t.message.replace(e,n),t}function Iv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Xd(r))return r}return{}}function Tv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Xd(t[0])?t[0]:Xd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ev=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new bv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return jp(this._delegate,t._delegate)},t}(),_v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Ev),Sv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vv(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Kp(this._delegate,function(t,e,n){var r=e,i=Pp("where",t);return new Gp(i,r,n)}(e,n,r)))}catch(e){throw wv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Kp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Pp("orderBy",t);return new Hp(r,n)}(e,n)))}catch(e){throw wv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Kp(this._delegate,function(t){return Ud("limit",t),new zp("limit",t,"F")}(e)))}catch(e){throw wv(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Kp(this._delegate,function(t){return Ud("limitToLast",t),new zp("limitToLast",t,"L")}(e)))}catch(e){throw wv(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $p("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw wv(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $p("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw wv(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wp("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw wv(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wp("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw wv(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Wd(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vd(t,Kd);var e=Vd(t.firestore,Yd),n=Jd(e),r=new iv(e);return function(t,e){var n=this,r=new Ec;return t.asyncQueue.enqueueAndForget((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,a,s;return _t(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Xh(t,e,!0)];case 1:return s=u.sent(),r=new Ef(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=cf(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,gd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Vp(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vd(t,Kd);var e=Vd(t.firestore,Yd),n=Jd(e),r=new iv(e);return Td(n,t._query,{source:"server"}).then((function(n){return new Vp(e,r,t,n)}))}(this._delegate):function(t){t=Vd(t,Kd);var e=Vd(t.firestore,Yd),n=Jd(e),r=new iv(e);return qp(t._query),Td(n,t._query).then((function(n){return new Vp(e,r,t,n)}))}(this._delegate)).then((function(t){return new Nv(e.firestore,new Vp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Iv(e),i=Tv(e,(function(e){return new Nv(t.firestore,new Vp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return av(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(yv.su(this.firestore,e)):this._delegate.withConverter(null))},t}(),Av=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new _v(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Nv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Sv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new _v(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Av(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new _v(n._firestore,r))}))},t.prototype.isEqual=function(t){return jp(this._delegate,t._delegate)},t}(),kv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return It(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new bv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new bv(this.firestore,void 0===t?zd(this._delegate):zd(this._delegate,t))}catch(t){throw wv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Vd(t.firestore,Yd),r=zd(t),i=tv(t.converter,e);return sv(n,[dp(fp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,xs.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new bv(e.firestore,t)}))},e.prototype.isEqual=function(t){return $d(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(yv.su(this.firestore,t)):this._delegate.withConverter(null))},e}(Sv);function Dv(t){return Vd(t,Bd)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cv,Ov=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(np.bind.apply(np,Nt([void 0],t)))}return t.documentId=function(){return new t(na.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=qt(t))instanceof np&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Rv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new mp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new pp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gp("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new bp("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),xv={Firestore:pv,GeoPoint:op,Timestamp:Wo,Blob:fv,Transaction:mv,WriteBatch:gv,DocumentReference:bv,DocumentSnapshot:Ev,Query:Sv,QueryDocumentSnapshot:_v,QuerySnapshot:Nv,CollectionReference:kv,FieldPath:Ov,FieldValue:Rv,setLogLevel:function(t){var e;e=t,Po.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Bt("firestore",(function(t){return function(t,e){return new pv(t,new Yd(t,e),new dv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},xv)))})(Cv=me),Cv.registerVersion("@firebase/firestore","2.3.2");me.initializeApp({apiKey:"AIzaSyCAQr3SBx-paxaEplB07r_PD3yYiig48C4",authDomain:"todo-svelte-3ae9c.firebaseapp.com",projectId:"todo-svelte-3ae9c",storageBucket:"todo-svelte-3ae9c.appspot.com",messagingSenderId:"178070889259",appId:"1:178070889259:web:f898590e5609bf058a1b6e"});const Pv=yt("Todos",[]);let Lv=me.firestore();class Mv{async checkUser(t){Lv.collection("users").doc(t.uid).get().then((e=>{e.exists||this.addUserToDb(t)})).catch((t=>console.log("err: "+t)))}async addUserToDb(t){let e={uid:t.uid,Displayname:t.displayName,email:t.email,photo:t.photoURL};Lv.collection("users").doc(t.uid).set(e)}async getUserInfo(t){let e;return Lv.collection("users").doc(t.uid).get().then((t=>e=t.data())).catch((t=>console.log("err: "+t))),e}async addTodo(t,e){Lv.collection("users").doc(e).collection("todos").doc(t.id).set({todo:t.todo,id:t.id,isDone:t.isDone,timestamp:me.firestore.FieldValue.serverTimestamp()}).then().catch((t=>console.log("ERROR: ",t)))}updateTodo(t,e){Lv.collection("users").doc(e).collection("todos").doc(t.id).update({id:t.id,isDone:t.isDone,todo:t.todo}).then((()=>console.log("Document updated!"))).catch((t=>console.log("ERROR: ",t)))}removeTodo(t,e){Lv.collection("users").doc(e).collection("todos").doc(t).delete().then().catch((t=>console.log("ERROR: ",t)))}ListenToChanges(t){me.firestore().collection("users").doc(t).collection("todos").orderBy("timestamp").onSnapshot((t=>{let e=[];t.forEach((t=>{let n={id:t.data().id,isDone:t.data().isDone,todo:t.data().todo};e=[...e,n]})),Pv.set(e)}))}}function Fv(e){let n,r,i,o,a,s,u,c,h;return{c(){n=w("div"),r=w("div"),i=T(),o=w("div"),a=T(),s=w("div"),k(r,"class","bar1 svelte-excf63"),k(o,"class","bar2 svelte-excf63"),k(s,"class","bar3 svelte-excf63"),k(n,"class",u=(e[0]?"change":"")+" container svelte-excf63")},m(t,u){y(t,n,u),g(n,r),g(n,i),g(n,o),g(n,a),g(n,s),c||(h=_(n,"click",e[1]),c=!0)},p(t,[e]){1&e&&u!==(u=(t[0]?"change":"")+" container svelte-excf63")&&k(n,"class",u)},i:t,o:t,d(t){t&&b(n),c=!1,h()}}}function Vv(t,e,n){const r=q();let i=!1;return[i,()=>{n(0,i=!i),r("menu")}]}class Uv extends mt{constructor(t){super(),vt(this,t,Vv,Fv,s,{})}}const jv=yt("id","0"),qv=yt("Header-Color","#ff69b4");function Bv(t){let e,n,r,i,o,a,s,u,c;return u=new Uv({}),u.$on("menu",t[2]),{c(){e=w("div"),n=w("img"),i=T(),o=w("p"),o.textContent="Svelte-Todo-App",a=T(),s=w("div"),lt(u.$$.fragment),k(n,"id","img"),n.src!==(r=t[1])&&k(n,"src",r),k(n,"alt","profile"),k(n,"class","svelte-1gqp3mb"),k(o,"class","title svelte-1gqp3mb"),k(s,"class","menu svelte-1gqp3mb"),k(e,"class","header svelte-1gqp3mb"),C(e,"background-color",t[0])},m(t,r){y(t,e,r),g(e,n),g(e,i),g(e,o),g(e,a),g(e,s),ft(u,s,null),c=!0},p(t,[i]){(!c||2&i&&n.src!==(r=t[1]))&&k(n,"src",r),(!c||1&i)&&C(e,"background-color",t[0])},i(t){c||(at(u.$$.fragment,t),c=!0)},o(t){st(u.$$.fragment,t),c=!1},d(t){t&&b(e),dt(u)}}}function Kv(t,e,n){let r,i,o,a=new Mv;return qv.subscribe((t=>n(0,r=t))),bt.subscribe((t=>o=t)),me.auth().onAuthStateChanged((async t=>{t?(jv.set(t.uid),a.checkUser(me.auth().currentUser),n(1,i=t.photoURL),localStorage.setItem("uid",t.uid),"online"===o&&a.ListenToChanges(t.uid)):(console.log("You are offline, no syncing availabe"),n(1,i="./profile.jpg"))})),[r,i,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)}]}class Gv extends mt{constructor(t){super(),vt(this,t,Kv,Bv,s,{})}}function Hv(t){const e=t-1;return e*e*e+1}function zv(t,{delay:e=0,duration:n=400,easing:r=Hv,x:i=0,y:o=0,opacity:a=0}={}){const s=getComputedStyle(t),u=+s.opacity,c="none"===s.transform?"":s.transform,h=u*(1-a);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-h*e}`}}const $v=yt("Todo-Color","#eeff00"),Wv=yt("Text-Color","#fffff"),Qv=yt("Background-Color","#00ffff");function Xv(e){let n,r,i;return{c(){n=w("button"),n.textContent="Logout",k(n,"class","onlineButton")},m(t,o){y(t,n,o),r||(i=_(n,"click",e[1]),r=!0)},p:t,i:t,o:t,d(t){t&&b(n),r=!1,i()}}}function Yv(e){let n,r;return n=new be({props:{large:!1}}),{c(){lt(n.$$.fragment)},m(t,e){ft(n,t,e),r=!0},p:t,i(t){r||(at(n.$$.fragment,t),r=!0)},o(t){st(n.$$.fragment,t),r=!1},d(t){dt(n,t)}}}function Jv(t){let e,n,r,i;const o=[Yv,Xv],a=[];function s(t,e){return"offline"===t[0]?0:"online"===t[0]?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=E()},m(t,n){~e&&a[e].m(t,n),y(t,r,n),i=!0},p(t,[i]){let u=e;e=s(t),e===u?~e&&a[e].p(t,i):(n&&(it(),st(a[u],1,1,(()=>{a[u]=null})),ot()),~e?(n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),at(n,1),n.m(r.parentNode,r)):n=null)},i(t){i||(at(n),i=!0)},o(t){st(n),i=!1},d(t){~e&&a[e].d(t),t&&b(r)}}}function Zv(t,e,n){let r;bt.subscribe((t=>n(0,r=t)));return[r,()=>{console.log("User signed out"),me.auth().signOut().then((()=>{bt.set("new"),Pv.set([])})).catch((t=>console.error("Sign Out Error",t)))}]}class tm extends mt{constructor(t){super(),vt(this,t,Zv,Jv,s,{})}}function em(t){let e,n,r,i,a,s,u,c,h,l,f,d,p,v,m,I,E,S,A,N,C,O,R,x,P,L,M;return O=new tm({}),{c(){e=w("div"),n=w("div"),r=w("input"),i=T(),a=w("label"),a.textContent="Background Color",s=T(),u=w("div"),c=w("input"),h=T(),l=w("label"),l.textContent="Header Background Color",f=T(),d=w("div"),p=w("input"),v=T(),m=w("label"),m.textContent="Todo Background Color",I=T(),E=w("div"),S=w("input"),A=T(),N=w("label"),N.textContent="Todo Text Color",C=T(),lt(O.$$.fragment),k(r,"type","color"),k(r,"class","svelte-1b1t3tk"),k(a,"for","head"),k(a,"class","svelte-1b1t3tk"),k(n,"class","colorContainer svelte-1b1t3tk"),k(c,"type","color"),k(c,"class","svelte-1b1t3tk"),k(l,"for","head"),k(l,"class","svelte-1b1t3tk"),k(u,"class","colorContainer svelte-1b1t3tk"),k(p,"type","color"),k(p,"class","svelte-1b1t3tk"),k(m,"for","head"),k(m,"class","svelte-1b1t3tk"),k(d,"class","colorContainer svelte-1b1t3tk"),k(S,"type","color"),k(S,"class","svelte-1b1t3tk"),k(N,"for","head"),k(N,"class","svelte-1b1t3tk"),k(E,"class","colorContainer svelte-1b1t3tk"),k(e,"id","menu"),k(e,"class","svelte-1b1t3tk")},m(o,b){y(o,e,b),g(e,n),g(n,r),D(r,t[0]),g(n,i),g(n,a),g(e,s),g(e,u),g(u,c),D(c,t[1]),g(u,h),g(u,l),g(e,f),g(e,d),g(d,p),D(p,t[2]),g(d,v),g(d,m),g(e,I),g(e,E),g(E,S),D(S,t[3]),g(E,A),g(E,N),g(e,C),ft(O,e,null),P=!0,L||(M=[_(r,"input",t[4]),_(c,"input",t[5]),_(p,"input",t[6]),_(S,"input",t[7])],L=!0)},p(t,[e]){1&e&&D(r,t[0]),2&e&&D(c,t[1]),4&e&&D(p,t[2]),8&e&&D(S,t[3])},i(t){P||(at(O.$$.fragment,t),W((()=>{x&&x.end(1),R||(R=ct(e,zv,{x:-100,duration:500})),R.start()})),P=!0)},o(t){st(O.$$.fragment,t),R&&R.invalidate(),x=ht(e,zv,{x:0,duration:500}),P=!1},d(t){t&&b(e),dt(O),t&&x&&x.end(),L=!1,o(M)}}}function nm(t,e,n){let r,i,o,a;return u(t,Qv,(t=>n(0,r=t))),u(t,qv,(t=>n(1,i=t))),u(t,$v,(t=>n(2,o=t))),u(t,Wv,(t=>n(3,a=t))),[r,i,o,a,function(){r=this.value,Qv.set(r)},function(){i=this.value,qv.set(i)},function(){o=this.value,$v.set(o)},function(){a=this.value,Wv.set(a)}]}class rm extends mt{constructor(t){super(),vt(this,t,nm,em,s,{})}}function im(t){let e;return{c(){e=w("div"),k(e,"class","unCheckedContainer svelte-fsajs8")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function om(t){let e;return{c(){e=w("div"),e.innerHTML='<p class="svelte-fsajs8">✔️</p>',k(e,"class","checkedContainer svelte-fsajs8")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function am(e){let n;function r(t,e){return t[0]?om:im}let i=r(e),o=i(e);return{c(){n=w("div"),o.c(),k(n,"class","container svelte-fsajs8")},m(t,e){y(t,n,e),o.m(n,null)},p(t,[e]){i!==(i=r(t))&&(o.d(1),o=i(t),o&&(o.c(),o.m(n,null)))},i:t,o:t,d(t){t&&b(n),o.d()}}}function sm(t,e,n){let{checked:r=!1}=e;return t.$$set=t=>{"checked"in t&&n(0,r=t.checked)},[r]}class um extends mt{constructor(t){super(),vt(this,t,sm,am,s,{checked:0})}}function cm(t){let e,n,r,i,o;return{c(){e=w("span"),n=I(t[0]),k(e,"id","text"),k(e,"type","text"),k(e,"class",r=" "+(t[1]?"done":"")+" center svelte-12tkl7b"),C(e,"color",t[3])},m(r,a){y(r,e,a),g(e,n),i||(o=_(e,"click",A(t[8])),i=!0)},p(t,i){1&i&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(n,t[0]),2&i&&r!==(r=" "+(t[1]?"done":"")+" center svelte-12tkl7b")&&k(e,"class",r),8&i&&C(e,"color",t[3])},d(t){t&&b(e),i=!1,o()}}}function hm(t){let e,n,r,i;return{c(){e=w("form"),n=w("input"),k(n,"id","altText"),k(n,"type","text"),k(n,"placeholder",t[0]),k(n,"class","svelte-12tkl7b"),k(e,"id","form"),k(e,"class","svelte-12tkl7b")},m(o,a){y(o,e,a),g(e,n),D(n,t[5]),r||(i=[_(n,"input",t[11]),_(e,"submit",S(t[7]))],r=!0)},p(t,e){1&e&&k(n,"placeholder",t[0]),32&e&&n.value!==t[5]&&D(n,t[5])},d(t){t&&b(e),r=!1,o(i)}}}function lm(t){let e,n,r,i,a,s,u,c,h,l,f,d,p,v,m;function I(e){t[10](e)}let E={};function S(t,e){return t[4]?hm:cm}void 0!==t[1]&&(E.checked=t[1]),r=new um({props:E}),K.push((()=>function(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}(r,"checked",I)));let N=S(t),D=N(t);return{c(){e=w("li"),n=w("span"),lt(r.$$.fragment),a=T(),D.c(),s=T(),u=w("div"),c=w("span"),c.textContent="✏️",h=T(),l=w("span"),l.textContent="X",k(n,"id","status"),k(n,"class","svelte-12tkl7b"),k(c,"id","editButton"),k(c,"class","center svelte-12tkl7b"),k(l,"id","removeButton"),k(l,"class","center svelte-12tkl7b"),k(u,"id","buttonContainer"),k(u,"class","svelte-12tkl7b"),C(e,"background-color",t[2]),k(e,"class","svelte-12tkl7b")},m(i,o){y(i,e,o),g(e,n),ft(r,n,null),g(e,a),D.m(e,null),g(e,s),g(e,u),g(u,c),g(u,h),g(u,l),p=!0,v||(m=[_(c,"click",A(t[7])),_(l,"click",A(t[6]))],v=!0)},p(t,[n]){const o={};!i&&2&n&&(i=!0,o.checked=t[1],function(t){H.push(t)}((()=>i=!1))),r.$set(o),N===(N=S(t))&&D?D.p(t,n):(D.d(1),D=N(t),D&&(D.c(),D.m(e,s))),(!p||4&n)&&C(e,"background-color",t[2])},i(t){p||(at(r.$$.fragment,t),W((()=>{d&&d.end(1),f||(f=ct(e,zv,{x:200,duration:500})),f.start()})),p=!0)},o(t){st(r.$$.fragment,t),f&&f.invalidate(),d=ht(e,zv,{x:-200,duration:500}),p=!1},d(t){t&&b(e),dt(r),D.d(),t&&d&&d.end(),v=!1,o(m)}}}function fm(t,e,n){let{todo:r}=e,{id:i}=e,{isDone:o}=e;const a=q();let s,u,c=!1,h=r;$v.subscribe((t=>n(2,s=t))),Wv.subscribe((t=>n(3,u=t)));return t.$$set=t=>{"todo"in t&&n(0,r=t.todo),"id"in t&&n(9,i=t.id),"isDone"in t&&n(1,o=t.isDone)},[r,o,s,u,c,h,()=>a("remove",i),()=>{n(4,c=!c),r!=h&&(n(0,r=h),a("update",{id:i,isDone:o,todo:r}))},()=>{n(1,o=!o),a("update",{id:i,isDone:o,todo:r})},i,function(t){o=t,n(1,o)},function(){h=this.value,n(5,h)}]}class dm extends mt{constructor(t){super(),vt(this,t,fm,lm,s,{todo:0,id:9,isDone:1})}}function pm(t,e,n){const r=t.slice();return r[6]=e[n],r}function vm(t){let e,r;const i=[t[6]];let o={};for(let t=0;t<i.length;t+=1)o=n(o,i[t]);return e=new dm({props:o}),e.$on("remove",t[1]),e.$on("update",t[2]),{c(){lt(e.$$.fragment)},m(t,n){ft(e,t,n),r=!0},p(t,n){const r=1&n?function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(i,[(o=t[6],"object"==typeof o&&null!==o?o:{})]):{};var o;e.$set(r)},i(t){r||(at(e.$$.fragment,t),r=!0)},o(t){st(e.$$.fragment,t),r=!1},d(t){dt(e,t)}}}function mm(t){let e,n,r=t[0],i=[];for(let e=0;e<r.length;e+=1)i[e]=vm(pm(t,r,e));const o=t=>st(i[t],1,1,(()=>{i[t]=null}));return{c(){e=w("ul");for(let t=0;t<i.length;t+=1)i[t].c();k(e,"class","svelte-1188gtg")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,[n]){if(7&n){let a;for(r=t[0],a=0;a<r.length;a+=1){const o=pm(t,r,a);i[a]?(i[a].p(o,n),at(i[a],1)):(i[a]=vm(o),i[a].c(),at(i[a],1),i[a].m(e,null))}for(it(),a=r.length;a<i.length;a+=1)o(a);ot()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)at(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)st(i[t]);n=!1},d(t){t&&b(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t)}}}function gm(t,e,n){let r,i;u(t,Pv,(t=>n(0,r=t))),u(t,bt,(t=>n(4,i=t)));let o,a=new Mv;jv.subscribe((t=>o=t));return[r,({detail:t})=>{h(Pv,r=r.filter((e=>e.id!=t)),r),"online"===i&&a.removeTodo(t,o)},({detail:t})=>{const e=r.findIndex((e=>e.id===t.id));h(Pv,r[e]=t,r),"online"===i&&a.updateTodo(t,o)}]}class ym extends mt{constructor(t){super(),vt(this,t,gm,mm,s,{})}}var bm=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){e=t.exports=function(){for(var t,n="",r=0;r<32;r++)t=16*e.random()|0,r>4&&r<21&&!(r%4)&&(n+="-"),n+=(12===r?4:16===r?3&t|8:t).toString(16);return n};var n=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;e.isUUID=function(t){return n.test(t)},e.random=function(){return Math.random()}}));function wm(e){let n,r,i,a,s,u,c,h,l,f,d,p,v;return{c(){n=w("div"),r=w("button"),i=I("CLEAR"),s=T(),u=w("form"),c=w("input"),h=T(),l=w("button"),f=I("➕"),k(r,"class","clear svelte-z2rerp"),C(r,"height",e[1]+"px"),W((()=>e[6].call(r))),k(c,"class","input svelte-z2rerp"),k(c,"type","text"),k(c,"placeholder","Todo"),C(c,"height",e[1]+"px"),k(l,"class","add svelte-z2rerp"),C(l,"width",e[2]+"px"),W((()=>e[8].call(l))),k(n,"id","parent"),k(n,"class","svelte-z2rerp")},m(t,o){y(t,n,o),g(n,r),g(r,i),a=x(r,e[6].bind(r)),g(n,s),g(n,u),g(u,c),D(c,e[0]),g(n,h),g(n,l),g(l,f),d=x(l,e[8].bind(l)),p||(v=[_(r,"click",e[3]),_(c,"input",e[7]),_(u,"submit",N(e[4])),_(l,"click",e[4])],p=!0)},p(t,[e]){2&e&&C(r,"height",t[1]+"px"),2&e&&C(c,"height",t[1]+"px"),1&e&&c.value!==t[0]&&D(c,t[0]),4&e&&C(l,"width",t[2]+"px")},i:t,o:t,d(t){t&&b(n),a(),d(),p=!1,o(v)}}}function Im(t,e,n){let r;u(t,bt,(t=>n(9,r=t)));let i,o,a,{todoTextLength:s}=e,c=new Mv;return t.$$set=t=>{"todoTextLength"in t&&n(5,s=t.todoTextLength)},[i,o,a,()=>{Pv.set([])},async t=>{if(i.length>s)return alert("Max 80 characters & needs to be bigger tha 0 character"),void n(0,i="");t.preventDefault();let e={todo:i,id:bm(),isDone:!1};i&&Pv.update((t=>[...t,e])),"online"===r&&c.addTodo(e,localStorage.getItem("uid")),n(0,i="")},s,function(){a=this.clientWidth,n(2,a)},function(){i=this.value,n(0,i)},function(){o=this.clientHeight,n(1,o)}]}class Tm extends mt{constructor(t){super(),vt(this,t,Im,wm,s,{todoTextLength:5})}}function Em(t){let e,n,r,i,o,a,s,u,c,h,l,f,d=t[0]&&Sm();return i=new Gv({}),i.$on("menu",t[2]),u=new ym({}),l=new Tm({props:{todoTextLength:Nm}}),{c(){e=w("div"),d&&d.c(),n=T(),r=w("div"),lt(i.$$.fragment),o=T(),a=w("div"),s=w("div"),lt(u.$$.fragment),c=T(),h=w("div"),lt(l.$$.fragment),k(e,"id","menuContainer"),k(r,"id","headerContainer"),k(r,"class","svelte-4q8rd5"),k(s,"id","listContainer"),k(s,"class","svelte-4q8rd5"),k(h,"id","formContainer"),k(h,"class","svelte-4q8rd5"),k(a,"id","parent"),k(a,"class","svelte-4q8rd5")},m(t,p){y(t,e,p),d&&d.m(e,null),y(t,n,p),y(t,r,p),ft(i,r,null),y(t,o,p),y(t,a,p),g(a,s),ft(u,s,null),g(a,c),g(a,h),ft(l,h,null),f=!0},p(t,n){t[0]?d?1&n&&at(d,1):(d=Sm(),d.c(),at(d,1),d.m(e,null)):d&&(it(),st(d,1,1,(()=>{d=null})),ot())},i(t){f||(at(d),at(i.$$.fragment,t),at(u.$$.fragment,t),at(l.$$.fragment,t),f=!0)},o(t){st(d),st(i.$$.fragment,t),st(u.$$.fragment,t),st(l.$$.fragment,t),f=!1},d(t){t&&b(e),d&&d.d(),t&&b(n),t&&b(r),dt(i),t&&b(o),t&&b(a),dt(u),dt(l)}}}function _m(e){let n,r;return n=new Te({}),{c(){lt(n.$$.fragment)},m(t,e){ft(n,t,e),r=!0},p:t,i(t){r||(at(n.$$.fragment,t),r=!0)},o(t){st(n.$$.fragment,t),r=!1},d(t){dt(n,t)}}}function Sm(t){let e,n;return e=new rm({}),{c(){lt(e.$$.fragment)},m(t,r){ft(e,t,r),n=!0},i(t){n||(at(e.$$.fragment,t),n=!0)},o(t){st(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Am(t){let e,n,r,i;const o=[_m,Em],a=[];function s(t,e){return"new"===t[1]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=E()},m(t,n){a[e].m(t,n),y(t,r,n),i=!0},p(t,[i]){let u=e;e=s(t),e===u?a[e].p(t,i):(it(),st(a[u],1,1,(()=>{a[u]=null})),ot(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),at(n,1),n.m(r.parentNode,r))},i(t){i||(at(n),i=!0)},o(t){st(n),i=!1},d(t){a[e].d(t),t&&b(r)}}}let Nm=80;function km(t,e,n){let r,i=!1;bt.subscribe((t=>n(1,r=t)));return Qv.subscribe((t=>window.document.body.style.backgroundColor=t)),[i,r,()=>n(0,i=!i)]}return new class extends mt{constructor(t){super(),vt(this,t,km,Am,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
